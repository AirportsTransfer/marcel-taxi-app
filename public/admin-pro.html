<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Admin Panel - Marcel's Taxi</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f7fa;
            color: #333;
        }

        .admin-layout {
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: 280px;
            background: #2c3e50;
            color: white;
            padding: 0;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }

        .sidebar-header {
            padding: 20px;
            background: #34495e;
            border-bottom: 1px solid #2c3e50;
        }

        .sidebar-header h2 {
            font-size: 18px;
            font-weight: 600;
        }

        .nav-menu {
            list-style: none;
            padding: 0;
        }

        .nav-item {
            border-bottom: 1px solid #34495e;
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            color: #bdc3c7;
            text-decoration: none;
            transition: all 0.3s;
            cursor: pointer;
        }

        .nav-link:hover {
            background: #34495e;
            color: white;
        }

        .nav-link.active {
            background: #3498db;
            color: white;
        }

        .nav-icon {
            margin-right: 12px;
            font-size: 16px;
            width: 20px;
        }

        .nav-submenu {
            background: #1a252f;
            display: none;
            transition: all 0.3s ease;
            overflow: hidden;
            max-height: 0;
        }

        .nav-submenu.show {
            display: block;
            max-height: 500px;
        }

        .nav-submenu .nav-link {
            padding: 12px 20px 12px 52px;
            font-size: 14px;
        }

        .main-content {
            flex: 1;
            background: #f5f7fa;
        }

        .header {
            background: white;
            padding: 15px 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 24px;
            color: #2c3e50;
        }

        .header-actions {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
        }

        .content-area {
            padding: 30px;
        }

        .content-section {
            display: none;
            background: white;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .content-section.active {
            display: block;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }

        .stat-number {
            font-size: 32px;
            font-weight: 700;
            color: #3498db;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #7f8c8d;
            font-size: 14px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #2c3e50;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e8ed;
            border-radius: 6px;
            font-size: 14px;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #3498db;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .table th,
        .table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e1e8ed;
        }

        .table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
        }

        .badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }

        .badge-success {
            background: #d4edda;
            color: #155724;
        }

        .badge-warning {
            background: #fff3cd;
            color: #856404;
        }

        .badge-danger {
            background: #f8d7da;
            color: #721c24;
        }

        .pricing-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #3498db;
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        /* Dispatch Section Styling */
        .dispatch-container {
            display: flex;
            height: calc(100vh - 150px);
            gap: 20px;
            margin-top: 20px;
        }

        .dispatch-left {
            width: 35%;
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            overflow-y: auto;
        }

        .dispatch-right {
            width: 65%;
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            position: relative;
        }

        .dispatch-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e9ecef;
        }

        .dispatch-title {
            font-size: 22px;
            font-weight: 600;
            color: #2c3e50;
        }

        .dispatch-actions {
            display: flex;
            gap: 10px;
        }

        .form-section {
            margin-bottom: 25px;
        }

        .form-section h4 {
            font-size: 16px;
            font-weight: 600;
            color: #34495e;
            margin-bottom: 15px;
            border-left: 4px solid #3498db;
            padding-left: 12px;
        }

        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }

        .form-row .form-group {
            flex: 1;
        }

        .form-group input,
        .form-group select {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 12px 15px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus {
            background: white;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .address-input {
            position: relative;
        }

        .address-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #dee2e6;
            border-top: none;
            border-radius: 0 0 8px 8px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }

        .suggestion-item {
            padding: 12px 15px;
            cursor: pointer;
            border-bottom: 1px solid #f1f3f4;
            transition: background-color 0.2s;
        }

        .suggestion-item:hover {
            background-color: #f8f9fa;
        }

        .suggestion-item:last-child {
            border-bottom: none;
        }

        .price-display {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 25px;
        }

        .price-amount {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .price-details {
            font-size: 14px;
            opacity: 0.9;
        }

        .dispatch-map {
            width: 100%;
            height: 100%;
            border-radius: 8px;
            position: relative;
            background: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 500px;
        }

        .map-placeholder {
            text-align: center;
            color: #6c757d;
        }

        .driver-markers {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
        }

        .driver-marker {
            position: absolute;
            width: 40px;
            height: 40px;
            background: #28a745;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            pointer-events: auto;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .driver-marker:hover {
            transform: scale(1.1);
        }

        .driver-marker.busy {
            background: #dc3545;
        }

        .driver-marker.offline {
            background: #6c757d;
        }

        .map-controls {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .map-control-btn {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 10px;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: all 0.2s;
        }

        .map-control-btn:hover {
            background: #f8f9fa;
            transform: translateY(-1px);
        }

        .booking-summary {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 25px;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .summary-label {
            color: #6c757d;
            font-size: 14px;
        }

        .summary-value {
            font-weight: 600;
            color: #2c3e50;
        }

        .btn-dispatch {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 15px 30px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            margin-top: 20px;
        }

        .btn-dispatch:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);
        }

        .btn-dispatch:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
        }

        .driver-status-legend {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            gap: 20px;
            font-size: 12px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
        }

        .legend-available { background: #28a745; }
        .legend-busy { background: #dc3545; }
        .legend-offline { background: #6c757d; }
    </style>
</head>
<body>
    <div class="admin-layout">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h2>🚗 Marcel's Taxi Pro</h2>
                <p style="font-size: 12px; opacity: 0.7;">Professional Admin Panel</p>
            </div>

            <ul class="nav-menu">
                <li class="nav-item">
                    <a class="nav-link active" onclick="showSection('dispatch')">
                        <span class="nav-icon">🚨</span> Dispatch
                    </a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="#" onclick="event.preventDefault(); toggleMenu('bookings');">
                        <span class="nav-icon">📋</span> Bookings
                    </a>
                    <ul class="nav-submenu" id="bookings-submenu">
                        <li><a class="nav-link" onclick="showSection('next-24h')">Next 24h</a></li>
                        <li><a class="nav-link" onclick="showSection('latest')">Latest</a></li>
                        <li><a class="nav-link" onclick="showSection('unconfirmed')">Unconfirmed</a></li>
                        <li><a class="nav-link" onclick="showSection('completed')">Completed</a></li>
                        <li><a class="nav-link" onclick="showSection('cancelled')">Cancelled</a></li>
                        <li><a class="nav-link" onclick="showSection('all-bookings')">All</a></li>
                        <li><a class="nav-link" onclick="showSection('trash')">Trash</a></li>
                        <li><a class="nav-link" onclick="showSection('calendar')">Calendar</a></li>
                        <li><a class="nav-link" onclick="showSection('add-new')">Add New</a></li>
                    </ul>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="#" onclick="event.preventDefault(); toggleMenu('reports');">
                        <span class="nav-icon">📈</span> Reports
                    </a>
                    <ul class="nav-submenu" id="reports-submenu">
                        <li><a class="nav-link" onclick="showSection('driver-report')">Driver Report</a></li>
                        <li><a class="nav-link" onclick="showSection('payment-report')">Payment Report</a></li>
                    </ul>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('users')">
                        <span class="nav-icon">👥</span> Users
                    </a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('feedback')">
                        <span class="nav-icon">💬</span> Feedback
                    </a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="#" onclick="event.preventDefault(); toggleMenu('settings');">
                        <span class="nav-icon">⚙️</span> Settings
                    </a>
                    <ul class="nav-submenu" id="settings-submenu">
                        <li><a class="nav-link" onclick="showSection('general')">⚙️ General Settings</a></li>
                        <li><a class="nav-link" onclick="showSection('types-of-vehicles')">🚗 Types of Vehicles</a></li>
                        <li><a class="nav-link" onclick="showSection('payment-methods')">💳 Payment Methods</a></li>
                        <li><a class="nav-link" onclick="showSection('notifications')">🔔 Notifications</a></li>
                        <li><a class="nav-link" onclick="showSection('mail')">📧 Email Settings</a></li>
                        <li><a class="nav-link" onclick="showSection('booking-settings')">📋 Booking Settings</a></li>
                        <li><a class="nav-link" onclick="showSection('locations')">📍 Locations</a></li>
                        <li><a class="nav-link" onclick="showSection('services')">🎯 Services</a></li>
                        <li><a class="nav-link" onclick="showSection('users-settings')">👥 User Management</a></li>
                    </ul>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="#" onclick="event.preventDefault(); toggleMenu('pricing');">
                        <span class="nav-icon">💰</span> Pricing
                    </a>
                    <ul class="nav-submenu" id="pricing-submenu">
                        <li><a class="nav-link" onclick="showSection('deposit-payments')">Deposit Payments</a></li>
                        <li><a class="nav-link" onclick="showSection('distance-time')">Distance & Time</a></li>
                        <li><a class="nav-link" onclick="showSection('distance-modifier')">Distance Modifier</a></li>
                        <li><a class="nav-link" onclick="showSection('driver-income')">Driver Income</a></li>
                        <li><a class="nav-link" onclick="showSection('fixed-prices')">Fixed Prices</a></li>
                        <li><a class="nav-link" onclick="showSection('holiday-surcharge')">Holiday Surcharge</a></li>
                        <li><a class="nav-link" onclick="showSection('item-surcharge')">Item Surcharge</a></li>
                        <li><a class="nav-link" onclick="showSection('location-surcharge')">Location Surcharge</a></li>
                        <li><a class="nav-link" onclick="showSection('night-surcharge')">Night Surcharge</a></li>
                        <li><a class="nav-link" onclick="showSection('other-discounts')">Other Discounts</a></li>
                        <li><a class="nav-link" onclick="showSection('tax')">Tax</a></li>
                        <li><a class="nav-link" onclick="showSection('voucher-discounts')">Voucher Discounts</a></li>
                    </ul>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('knowledge-base')">
                        <span class="nav-icon">📚</span> Knowledge Base
                    </a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('updates')">
                        <span class="nav-icon">🔄</span> Updates
                    </a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('profile')">
                        <span class="nav-icon">👤</span> Profile
                    </a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" onclick="logout()">
                        <span class="nav-icon">🚪</span> Sign Out
                    </a>
                </li>
            </ul>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="header">
                <h1 id="pageTitle">Dispatch</h1>
                <div class="header-actions">
                    <button class="btn btn-secondary" onclick="testSettings()" style="margin-right: 10px;">🧪 Test Settings</button>
                    <button class="btn btn-primary" onclick="window.location.href='/'">👀 View Customer App</button>
                    <button class="btn btn-primary" onclick="logout()">Sign Out</button>
                </div>
            </div>

            <div class="content-area">
                <!-- Dispatch Section -->
                <div id="dispatch-section" class="content-section active">
                    <div class="dispatch-container">
                        <!-- Left Panel: Booking Form -->
                        <div class="dispatch-left">
                            <div class="dispatch-header">
                                <h3 class="dispatch-title">Manual Booking</h3>
                                <div class="dispatch-actions">
                                    <button class="btn btn-sm" onclick="clearForm()">Clear</button>
                                    <button class="btn btn-sm" onclick="loadTemplate()">Template</button>
                                </div>
                            </div>

                            <form id="manualBookingForm">
                                <!-- Locations Section -->
                                <div class="form-section">
                                    <h4>📍 Locations</h4>
                                    <div class="form-group">
                                        <label>Pickup Location</label>
                                        <div class="address-input">
                                            <input type="text" id="pickupLocation" placeholder="Enter pickup address" required>
                                            <div class="address-suggestions" id="pickupSuggestions"></div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label>Destination</label>
                                        <div class="address-input">
                                            <input type="text" id="destination" placeholder="Enter destination address" required>
                                            <div class="address-suggestions" id="destSuggestions"></div>
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label>Via (Optional)</label>
                                            <input type="text" id="viaLocation" placeholder="Via location">
                                        </div>
                                        <div class="form-group">
                                            <label>Return Journey</label>
                                            <select id="returnJourney">
                                                <option value="no">No</option>
                                                <option value="yes">Yes</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <!-- Passenger Details -->
                                <div class="form-section">
                                    <h4>👤 Passenger Details</h4>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label>Passenger Name</label>
                                            <input type="text" id="passengerName" placeholder="Full name" required>
                                        </div>
                                        <div class="form-group">
                                            <label>Phone Number</label>
                                            <input type="tel" id="passengerPhone" placeholder="+31 6 12345678" required>
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label>Email</label>
                                            <input type="email" id="passengerEmail" placeholder="email@example.com">
                                        </div>
                                        <div class="form-group">
                                            <label>Passengers</label>
                                            <select id="passengerCount">
                                                <option value="1">1 Passenger</option>
                                                <option value="2">2 Passengers</option>
                                                <option value="3">3 Passengers</option>
                                                <option value="4">4 Passengers</option>
                                                <option value="5+">5+ Passengers</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <!-- Booking Details -->
                                <div class="form-section">
                                    <h4>📅 Booking Details</h4>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label>Pickup Date</label>
                                            <input type="date" id="pickupDate" required>
                                        </div>
                                        <div class="form-group">
                                            <label>Pickup Time</label>
                                            <input type="time" id="pickupTime" required>
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label>Vehicle Type</label>
                                            <select id="vehicleType" required>
                                                <option value="economy">🚗 Economy</option>
                                                <option value="business">🚙 Business</option>
                                                <option value="minivan">🚐 Minivan</option>
                                                <option value="luxury">🏎️ Luxury</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label>Payment Method</label>
                                            <select id="paymentMethod" required>
                                                <option value="cash">💵 Cash</option>
                                                <option value="card">💳 Card</option>
                                                <option value="account">🏦 Account</option>
                                                <option value="voucher">🎫 Voucher</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label>Special Requirements</label>
                                        <input type="text" id="specialRequirements" placeholder="Child seat, wheelchair access, etc.">
                                    </div>
                                </div>

                                <!-- Price Display -->
                                <div class="price-display">
                                    <div class="price-amount" id="totalPrice">€0.00</div>
                                    <div class="price-details" id="priceBreakdown">Calculate route for pricing</div>
                                </div>

                                <!-- Booking Summary -->
                                <div class="booking-summary">
                                    <div class="summary-row">
                                        <span class="summary-label">Distance:</span>
                                        <span class="summary-value" id="routeDistance">-</span>
                                    </div>
                                    <div class="summary-row">
                                        <span class="summary-label">Duration:</span>
                                        <span class="summary-value" id="routeDuration">-</span>
                                    </div>
                                    <div class="summary-row">
                                        <span class="summary-label">Base Fare:</span>
                                        <span class="summary-value" id="baseFare">€2.50</span>
                                    </div>
                                    <div class="summary-row">
                                        <span class="summary-label">Available Drivers:</span>
                                        <span class="summary-value" id="availableDrivers">8</span>
                                    </div>
                                </div>

                                <button type="submit" class="btn-dispatch" id="createBookingBtn">
                                    🚕 Create Booking
                                </button>
                            </form>
                        </div>

                        <!-- Right Panel: Interactive Map -->
                        <div class="dispatch-right">
                            <div class="dispatch-map" id="dispatchMap">
                                <div class="map-placeholder">
                                    <div style="font-size: 48px; margin-bottom: 20px;">🗺️</div>
                                    <h4>Interactive Map</h4>
                                    <p>Driver locations and route visualization</p>
                                    <small>Map integration: Google Maps / OpenStreetMap</small>
                                </div>
                                
                                <!-- Driver Markers (will be positioned dynamically) -->
                                <div class="driver-markers">
                                    <div class="driver-marker" style="top: 20%; left: 25%;" title="Driver #1 - Available">D1</div>
                                    <div class="driver-marker" style="top: 40%; left: 60%;" title="Driver #2 - Available">D2</div>
                                    <div class="driver-marker busy" style="top: 60%; left: 30%;" title="Driver #3 - Busy">D3</div>
                                    <div class="driver-marker" style="top: 30%; left: 70%;" title="Driver #4 - Available">D4</div>
                                    <div class="driver-marker offline" style="top: 70%; left: 45%;" title="Driver #5 - Offline">D5</div>
                                    <div class="driver-marker" style="top: 15%; left: 80%;" title="Driver #6 - Available">D6</div>
                                    <div class="driver-marker" style="top: 80%; left: 20%;" title="Driver #7 - Available">D7</div>
                                    <div class="driver-marker busy" style="top: 50%; left: 85%;" title="Driver #8 - Busy">D8</div>
                                </div>
                            </div>

                            <!-- Map Controls -->
                            <div class="map-controls">
                                <button class="map-control-btn" onclick="refreshDrivers()" title="Refresh Drivers">
                                    🔄
                                </button>
                                <button class="map-control-btn" onclick="toggleTraffic()" title="Toggle Traffic">
                                    🚦
                                </button>
                                <button class="map-control-btn" onclick="centerMap()" title="Center Map">
                                    🎯
                                </button>
                                <button class="map-control-btn" onclick="toggleFullscreen()" title="Fullscreen">
                                    ⛶
                                </button>
                            </div>

                            <!-- Driver Status Legend -->
                            <div class="driver-status-legend">
                                <div class="legend-item">
                                    <div class="legend-color legend-available"></div>
                                    <span>Available (6)</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-color legend-busy"></div>
                                    <span>Busy (2)</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-color legend-offline"></div>
                                    <span>Offline (1)</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Other sections continue here...
                                <td>Marie Bakker</td>
                                <td>Station → Hotel</td>
                                <td>16:00</td>
                                <td><span class="badge badge-warning">In Progress</span></td>
                                <td>€25.00</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Distance & Time Pricing -->
                <div id="distance-time-section" class="content-section">
                    <h2>💰 Distance & Time Pricing</h2>
                    <p>Configure pricing for each vehicle type - prices will be used in the booking system</p>
                    
                    <div style="margin: 20px 0; display: flex; gap: 10px; flex-wrap: wrap;">
                        <button class="btn btn-primary" onclick="loadVehiclePricing()">🔄 Load Vehicle Pricing</button>
                        <button class="btn btn-success" onclick="saveAllPricing()">💾 Save All Changes</button>
                        <button class="btn btn-secondary" onclick="resetToDefaults()">🔄 Reset to Defaults</button>
                        <button class="btn btn-warning" onclick="debugPricingSection()">🔧 Debug Info</button>
                    </div>
                    
                    <div id="vehiclePricingContainer" style="margin-top: 30px;">
                        <!-- Vehicle pricing cards will be loaded here -->
                    </div>
                </div>

                <!-- Fixed Prices -->
                <div id="fixed-prices-section" class="content-section">
                    <h2>Fixed Prices</h2>
                    <p>Set fixed prices for specific routes</p>
                    
                    <div class="form-grid">
                        <div>
                            <div class="form-group">
                                <label>From Location</label>
                                <input type="text" placeholder="Dam Square, Amsterdam">
                            </div>
                            <div class="form-group">
                                <label>To Location</label>
                                <input type="text" placeholder="Schiphol Airport">
                            </div>
                        </div>
                        <div>
                            <div class="form-group">
                                <label>Fixed Price (€)</label>
                                <input type="number" placeholder="45.00" step="0.50">
                            </div>
                            <div class="form-group">
                                <label>Vehicle Type</label>
                                <select>
                                    <option>All Vehicles</option>
                                    <option>Saloon</option>
                                    <option>Estate</option>
                                    <option>Minivan</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-primary">Add Fixed Price</button>

                    <h3 style="margin-top: 30px;">Current Fixed Prices</h3>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>From</th>
                                <th>To</th>
                                <th>Price</th>
                                <th>Vehicle</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Dam Square</td>
                                <td>Schiphol Airport</td>
                                <td>€45.00</td>
                                <td>All</td>
                                <td><button class="btn">Edit</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Deposit Payments -->
                <div id="deposit-payments-section" class="content-section">
                    <h2>Deposit Payments</h2>
                    <p>Configure deposit and security payment settings</p>
                    
                    <div class="pricing-section">
                        <h3>Security Deposit Settings</h3>
                        <div class="form-grid">
                            <div>
                                <div class="form-group">
                                    <label>Enable Security Deposit</label>
                                    <label class="toggle-switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label>Default Deposit Amount (€)</label>
                                    <input type="number" value="25.00" step="5.00">
                                </div>
                            </div>
                            <div>
                                <div class="form-group">
                                    <label>Deposit Required For</label>
                                    <select>
                                        <option>Cash Payments</option>
                                        <option>Card in Taxi</option>
                                        <option>All Payment Methods</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Auto-Release After (hours)</label>
                                    <input type="number" value="24" min="1" max="168">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Distance Modifier -->
                <div id="distance-modifier-section" class="content-section">
                    <h2>Distance Modifier</h2>
                    <p>Apply multipliers based on distance ranges</p>
                    
                    <div class="pricing-section">
                        <h3>Distance Multipliers</h3>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Distance Range (km)</th>
                                    <th>Multiplier</th>
                                    <th>Description</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>0 - 10</td>
                                    <td><input type="number" value="1.0" step="0.1" style="width: 80px;"></td>
                                    <td>Local trips</td>
                                    <td><button class="btn btn-danger btn-sm">Remove</button></td>
                                </tr>
                                <tr>
                                    <td>10 - 50</td>
                                    <td><input type="number" value="1.2" step="0.1" style="width: 80px;"></td>
                                    <td>Regional trips</td>
                                    <td><button class="btn btn-danger btn-sm">Remove</button></td>
                                </tr>
                                <tr>
                                    <td>50+</td>
                                    <td><input type="number" value="1.5" step="0.1" style="width: 80px;"></td>
                                    <td>Long distance</td>
                                    <td><button class="btn btn-danger btn-sm">Remove</button></td>
                                </tr>
                            </tbody>
                        </table>
                        <button class="btn btn-success">Add New Range</button>
                    </div>
                </div>

                <!-- Holiday Surcharge -->
                <div id="holiday-surcharge-section" class="content-section">
                    <h2>Holiday Surcharge</h2>
                    <p>Configure pricing for holidays and special dates</p>
                    
                    <div class="pricing-section">
                        <h3>Holiday Settings</h3>
                        <div class="form-grid">
                            <div>
                                <div class="form-group">
                                    <label>Enable Holiday Surcharge</label>
                                    <label class="toggle-switch">
                                        <input type="checkbox">
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label>Surcharge Type</label>
                                    <select>
                                        <option>Percentage</option>
                                        <option>Fixed Amount</option>
                                    </select>
                                </div>
                            </div>
                            <div>
                                <div class="form-group">
                                    <label>Surcharge Value</label>
                                    <input type="number" value="50" min="0">
                                </div>
                                <div class="form-group">
                                    <label>Apply To</label>
                                    <select>
                                        <option>Total Fare</option>
                                        <option>Base Fare Only</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <h4>Holiday Dates</h4>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Holiday Name</th>
                                    <th>Date</th>
                                    <th>Yearly Recurring</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>New Year's Day</td>
                                    <td>2024-01-01</td>
                                    <td>✅</td>
                                    <td><button class="btn btn-danger btn-sm">Remove</button></td>
                                </tr>
                                <tr>
                                    <td>Christmas</td>
                                    <td>2024-12-25</td>
                                    <td>✅</td>
                                    <td><button class="btn btn-danger btn-sm">Remove</button></td>
                                </tr>
                            </tbody>
                        </table>
                        <button class="btn btn-success">Add Holiday</button>
                    </div>
                </div>

                <!-- Night Surcharge -->
                <div id="night-surcharge-section" class="content-section">
                    <h2>Night Surcharge</h2>
                    <p>Configure surcharges for night time rides</p>
                    
                    <div class="pricing-section">
                        <h3>Night Time Settings</h3>
                        <div class="form-grid">
                            <div>
                                <div class="form-group">
                                    <label>Enable Night Surcharge</label>
                                    <label class="toggle-switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label>Start Time</label>
                                    <input type="time" value="23:00">
                                </div>
                                <div class="form-group">
                                    <label>End Time</label>
                                    <input type="time" value="06:00">
                                </div>
                            </div>
                            <div>
                                <div class="form-group">
                                    <label>Surcharge (%)</label>
                                    <input type="number" value="25" min="0" max="100">
                                </div>
                                <div class="form-group">
                                    <label>Apply on Weekends</label>
                                    <label class="toggle-switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label>Apply on Holidays</label>
                                    <label class="toggle-switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Location Surcharge -->
                <div id="location-surcharge-section" class="content-section">
                    <h2>Location Surcharge</h2>
                    <p>Add surcharges for specific pickup/dropoff locations</p>
                    
                    <div class="pricing-section">
                        <h3>Location-Based Surcharges</h3>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Location</th>
                                    <th>Type</th>
                                    <th>Surcharge</th>
                                    <th>Apply To</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Schiphol Airport</td>
                                    <td>Airport</td>
                                    <td>€5.00</td>
                                    <td>Pickup</td>
                                    <td><button class="btn btn-danger btn-sm">Remove</button></td>
                                </tr>
                                <tr>
                                    <td>Centraal Station</td>
                                    <td>Train Station</td>
                                    <td>€2.50</td>
                                    <td>Both</td>
                                    <td><button class="btn btn-danger btn-sm">Remove</button></td>
                                </tr>
                            </tbody>
                        </table>
                        <button class="btn btn-success">Add Location Surcharge</button>
                    </div>
                </div>

                <!-- Tax Settings -->
                <div id="tax-section" class="content-section">
                    <h2>Tax Configuration</h2>
                    <p>Configure tax rates and VAT settings</p>
                    
                    <div class="pricing-section">
                        <h3>Tax Settings</h3>
                        <div class="form-grid">
                            <div>
                                <div class="form-group">
                                    <label>Enable Tax/VAT</label>
                                    <label class="toggle-switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label>Default Tax Rate (%)</label>
                                    <input type="number" value="21" step="0.1">
                                </div>
                                <div class="form-group">
                                    <label>Tax Name</label>
                                    <input type="text" value="BTW">
                                </div>
                            </div>
                            <div>
                                <div class="form-group">
                                    <label>Tax Included in Price</label>
                                    <label class="toggle-switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label>Company Tax Number</label>
                                    <input type="text" placeholder="NL123456789B01">
                                </div>
                                <div class="form-group">
                                    <label>Show Tax on Invoice</label>
                                    <label class="toggle-switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Surcharges -->
                <div id="surcharges-section" class="content-section">
                    <h2>Surcharges</h2>
                    
                    <div class="pricing-section">
                        <h3>Night Surcharge</h3>
                        <div class="form-grid">
                            <div>
                                <div class="form-group">
                                    <label>Enable Night Surcharge</label>
                                    <label class="toggle-switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label>Start Time</label>
                                    <input type="time" value="23:00">
                                </div>
                            </div>
                            <div>
                                <div class="form-group">
                                    <label>End Time</label>
                                    <input type="time" value="06:00">
                                </div>
                                <div class="form-group">
                                    <label>Surcharge (%)</label>
                                    <input type="number" value="25" min="0" max="100">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="pricing-section">
                        <h3>Holiday Surcharge</h3>
                        <div class="form-grid">
                            <div>
                                <div class="form-group">
                                    <label>Enable Holiday Surcharge</label>
                                    <label class="toggle-switch">
                                        <input type="checkbox">
                                        <span class="slider"></span>
                                    </label>
                                </div>
                            </div>
                            <div>
                                <div class="form-group">
                                    <label>Surcharge (%)</label>
                                    <input type="number" value="50" min="0" max="100">
                                </div>
                            </div>
                        </div>
                    </div>

                    <button class="btn btn-primary">Save Surcharge Settings</button>
                </div>

                <!-- Vehicle Types -->
                <div id="vehicles-section" class="content-section">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                        <div>
                            <h2>Types of Vehicles</h2>
                            <p>Manage your vehicle fleet and specifications</p>
                        </div>
                        <button class="btn btn-primary" onclick="openAddVehicleModal()">
                            <i class="fas fa-plus"></i> Add New Vehicle
                        </button>
                    </div>

                    <div class="vehicle-management-table">
                        <table class="table" style="background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                            <thead style="background: #f8f9fa; border-bottom: 2px solid #e9ecef;">
                                <tr>
                                    <th style="padding: 15px; font-weight: 600;">Image</th>
                                    <th style="padding: 15px; font-weight: 600;">Name</th>
                                    <th style="padding: 15px; font-weight: 600;">Driver</th>
                                    <th style="padding: 15px; font-weight: 600;">Services</th>
                                    <th style="padding: 15px; font-weight: 600;">Hourly rate</th>
                                    <th style="padding: 15px; font-weight: 600;">Capacity</th>
                                    <th style="padding: 15px; font-weight: 600;">Enquire</th>
                                    <th style="padding: 15px; font-weight: 600;">Default</th>
                                    <th style="padding: 15px; font-weight: 600;">Active</th>
                                    <th style="padding: 15px; font-weight: 600;">Ordering</th>
                                    <th style="padding: 15px; font-weight: 600;">Display</th>
                                    <th style="padding: 15px; font-weight: 600;">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="vehicleTableBody">
                                <tr>
                                    <td colspan="12" style="text-align: center; padding: 40px; color: #666;">
                                        Loading vehicles...
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Vehicle Edit/Add Modal -->
                <div id="vehicleModal" class="modal" style="display: none;">
                    <div class="modal-content" style="max-width: 600px; max-height: 90vh; overflow-y: auto;">
                        <div class="modal-header">
                            <h3 id="modalTitle">Edit Vehicle</h3>
                            <span class="close" onclick="closeVehicleModal()">&times;</span>
                        </div>
                        <div class="modal-body">
                            <form id="vehicleForm">
                                <div class="form-group">
                                    <label>Name</label>
                                    <input type="text" id="vehicleName" class="form-control" placeholder="Premium Class" required>
                                </div>
                                
                                <div class="form-group">
                                    <label>Description</label>
                                    <textarea id="vehicleDescription" class="form-control" rows="3" placeholder="First class service"></textarea>
                                </div>
                                
                                <div class="form-group">
                                    <label>Vehicle Image</label>
                                    <div class="image-upload-section">
                                        <div class="current-image" id="currentImagePreview">
                                            <img id="previewImg" src="" alt="Vehicle" style="width: 150px; height: 100px; object-fit: cover; border-radius: 8px; display: none;">
                                        </div>
                                        <div class="upload-options" style="margin: 15px 0;">
                                            <div style="display: flex; gap: 20px; align-items: center;">
                                                <label style="display: flex; align-items: center; gap: 8px;">
                                                    <input type="radio" name="imageSource" value="gallery" checked>
                                                    <span>Gallery</span>
                                                </label>
                                                <label style="display: flex; align-items: center; gap: 8px;">
                                                    <input type="radio" name="imageSource" value="upload">
                                                    <span>Upload</span>
                                                </label>
                                            </div>
                                        </div>
                                        <div id="gallerySection">
                                            <select id="imageSelect" class="form-control" onchange="updateImagePreview()">
                                                <option value="">Choose image</option>
                                                <option value="https://images.unsplash.com/photo-1563720360172-67b8f3dce741?w=400&h=250&fit=crop">Premium Sedan</option>
                                                <option value="https://images.unsplash.com/photo-1555215695-3004980ad54e?w=400&h=250&fit=crop">Standard Saloon</option>
                                                <option value="https://images.unsplash.com/photo-1544636331-e26879cd4d9b?w=400&h=250&fit=crop">Minivan</option>
                                                <option value="https://images.unsplash.com/photo-1502877338535-766e1452684a?w=400&h=250&fit=crop">Estate</option>
                                                <option value="https://images.unsplash.com/photo-1549317661-bd32c8ce0db2?w=400&h=250&fit=crop">Economy Car</option>
                                                <option value="https://images.unsplash.com/photo-1616422285623-13ff0162193c?w=400&h=250&fit=crop">Business Class</option>
                                            </select>
                                        </div>
                                        <div id="uploadSection" style="display: none;">
                                            <input type="file" id="imageUpload" class="form-control" accept="image/*" onchange="handleImageUpload(this)">
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="capacity-section">
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                        <div class="form-group">
                                            <label>Passengers</label>
                                            <div style="display: flex; align-items: center; gap: 10px;">
                                                <input type="number" id="passengers" class="form-control" value="2" min="1" max="20">
                                                <div style="display: flex; flex-direction: column;">
                                                    <button type="button" class="btn btn-sm" onclick="increment('passengers')" style="padding: 2px 8px; margin-bottom: 2px;">+</button>
                                                    <button type="button" class="btn btn-sm" onclick="decrement('passengers')" style="padding: 2px 8px;">-</button>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label>Luggage</label>
                                            <div style="display: flex; align-items: center; gap: 10px;">
                                                <input type="number" id="luggage" class="form-control" value="2" min="0" max="20">
                                                <div style="display: flex; flex-direction: column;">
                                                    <button type="button" class="btn btn-sm" onclick="increment('luggage')" style="padding: 2px 8px; margin-bottom: 2px;">+</button>
                                                    <button type="button" class="btn btn-sm" onclick="decrement('luggage')" style="padding: 2px 8px;">-</button>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label>Hand luggage</label>
                                            <div style="display: flex; align-items: center; gap: 10px;">
                                                <input type="number" id="handLuggage" class="form-control" value="2" min="0" max="20">
                                                <div style="display: flex; flex-direction: column;">
                                                    <button type="button" class="btn btn-sm" onclick="increment('handLuggage')" style="padding: 2px 8px; margin-bottom: 2px;">+</button>
                                                    <button type="button" class="btn btn-sm" onclick="decrement('handLuggage')" style="padding: 2px 8px;">-</button>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label>Wheelchairs</label>
                                            <div style="display: flex; align-items: center; gap: 10px;">
                                                <input type="number" id="wheelchairs" class="form-control" value="0" min="0" max="10">
                                                <div style="display: flex; flex-direction: column;">
                                                    <button type="button" class="btn btn-sm" onclick="increment('wheelchairs')" style="padding: 2px 8px; margin-bottom: 2px;">+</button>
                                                    <button type="button" class="btn btn-sm" onclick="decrement('wheelchairs')" style="padding: 2px 8px;">-</button>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label>Booster seats</label>
                                            <div style="display: flex; align-items: center; gap: 10px;">
                                                <input type="number" id="boosterSeats" class="form-control" value="0" min="0" max="10">
                                                <div style="display: flex; flex-direction: column;">
                                                    <button type="button" class="btn btn-sm" onclick="increment('boosterSeats')" style="padding: 2px 8px; margin-bottom: 2px;">+</button>
                                                    <button type="button" class="btn btn-sm" onclick="decrement('boosterSeats')" style="padding: 2px 8px;">-</button>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label>Child seats</label>
                                            <div style="display: flex; align-items: center; gap: 10px;">
                                                <input type="number" id="childSeats" class="form-control" value="0" min="0" max="10">
                                                <div style="display: flex; flex-direction: column;">
                                                    <button type="button" class="btn btn-sm" onclick="increment('childSeats')" style="padding: 2px 8px; margin-bottom: 2px;">+</button>
                                                    <button type="button" class="btn btn-sm" onclick="decrement('childSeats')" style="padding: 2px 8px;">-</button>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label>Infant seats</label>
                                            <div style="display: flex; align-items: center; gap: 10px;">
                                                <input type="number" id="infantSeats" class="form-control" value="0" min="0" max="10">
                                                <div style="display: flex; flex-direction: column;">
                                                    <button type="button" class="btn btn-sm" onclick="increment('infantSeats')" style="padding: 2px 8px; margin-bottom: 2px;">+</button>
                                                    <button type="button" class="btn btn-sm" onclick="decrement('infantSeats')" style="padding: 2px 8px;">-</button>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label>Ordering</label>
                                            <div style="display: flex; align-items: center; gap: 10px;">
                                                <input type="number" id="ordering" class="form-control" value="0" min="0" max="100">
                                                <div style="display: flex; flex-direction: column;">
                                                    <button type="button" class="btn btn-sm" onclick="increment('ordering')" style="padding: 2px 8px; margin-bottom: 2px;">+</button>
                                                    <button type="button" class="btn btn-sm" onclick="decrement('ordering')" style="padding: 2px 8px;">-</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label>Driver</label>
                                    <select id="vehicleDriver" class="form-control">
                                        <option value="unassigned">Unassigned</option>
                                        <option value="john">John Smith</option>
                                        <option value="mike">Mike Johnson</option>
                                        <option value="sarah">Sarah Wilson</option>
                                    </select>
                                </div>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin: 20px 0;">
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 8px;">
                                            <input type="checkbox" id="enableEnquire">
                                            <span>Enable enquire button</span>
                                        </label>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 8px;">
                                            <input type="checkbox" id="isDefault">
                                            <span>Default</span>
                                        </label>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 8px;">
                                            <input type="checkbox" id="isActive" checked>
                                            <span>Active</span>
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label>Display</label>
                                    <select id="displayOption" class="form-control">
                                        <option value="frontend-backend">Frontend & Backend</option>
                                        <option value="frontend">Frontend only</option>
                                        <option value="backend">Backend only</option>
                                    </select>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" onclick="closeVehicleModal()">Cancel</button>
                            <button type="button" class="btn btn-success" onclick="saveVehicle()">
                                <i class="fas fa-save"></i> Save
                            </button>
                        </div>
                    </div>
                </div>
                        </tbody>
                    </table>
                </div>

                <!-- No-Show Management ---->
                <div id="no-show-section" class="content-section">
                    <h2>No-Show Management</h2>
                    <p>Beheer klanten die niet opdagen voor hun afspraak</p>
                    
                    <div class="pricing-section">
                        <h3>No-Show Instellingen</h3>
                        <div class="form-grid">
                            <div>
                                <div class="form-group">
                                    <label>No-Show Boete (€)</label>
                                    <input type="number" value="15.00" step="0.50" id="noShowFee">
                                </div>
                                <div class="form-group">
                                    <label>Wachttijd (minuten)</label>
                                    <input type="number" value="10" min="5" max="30" id="waitTime">
                                </div>
                            </div>
                            <div>
                                <div class="form-group">
                                    <label>Automatische No-Show na wachttijd</label>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="autoNoShow" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label>Email notificatie naar klant</label>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="emailNoShow" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="saveNoShowSettings()">Opslaan</button>
                    </div>

                    <h3 style="margin-top: 30px;">Recente No-Shows</h3>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Datum</th>
                                <th>Klant</th>
                                <th>Route</th>
                                <th>Geplande Tijd</th>
                                <th>Boete</th>
                                <th>Status</th>
                                <th>Acties</th>
                            </tr>
                        </thead>
                        <tbody id="noShowList">
                            <tr>
                                <td>2024-01-15</td>
                                <td>Jan Janssen<br><small>+31 6 12345678</small></td>
                                <td>Dam → Schiphol</td>
                                <td>14:30</td>
                                <td>€15.00</td>
                                <td><span class="badge badge-danger">Niet betaald</span></td>
                                <td>
                                    <button class="btn" onclick="markNoShowPaid(1)">Betaald</button>
                                    <button class="btn" onclick="waiveNoShowFee(1)">Kwijtschelding</button>
                                </td>
                            </tr>
                            <tr>
                                <td>2024-01-14</td>
                                <td>Marie Bakker<br><small>+31 6 87654321</small></td>
                                <td>Station → Hotel</td>
                                <td>16:00</td>
                                <td>€15.00</td>
                                <td><span class="badge badge-success">Betaald</span></td>
                                <td>
                                    <button class="btn" disabled>Afgehandeld</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Booking Modifications ---->
                <div id="modifications-section" class="content-section">
                    <h2>Booking Modificaties</h2>
                    <p>Beheer klant aanpassingen aan hun boekingen</p>
                    
                    <div class="pricing-section">
                        <h3>Modificatie Regels</h3>
                        <div class="form-grid">
                            <div>
                                <div class="form-group">
                                    <label>Gratis wijziging tot (uren voor vertrek)</label>
                                    <input type="number" value="24" min="1" max="72" id="freeModificationHours">
                                </div>
                                <div class="form-group">
                                    <label>Wijzigingskosten na deadline (€)</label>
                                    <input type="number" value="5.00" step="0.50" id="modificationFee">
                                </div>
                            </div>
                            <div>
                                <div class="form-group">
                                    <label>Annuleringskosten (€)</label>
                                    <input type="number" value="3.00" step="0.50" id="cancellationFee">
                                </div>
                                <div class="form-group">
                                    <label>Volledige betaling bij te late annulering</label>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="fullPaymentLate" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="saveModificationSettings()">Opslaan</button>
                    </div>

                    <h3 style="margin-top: 30px;">Recente Modificaties</h3>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Datum</th>
                                <th>Klant</th>
                                <th>Originele Tijd</th>
                                <th>Nieuwe Tijd</th>
                                <th>Wijzigingskosten</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="modificationsList">
                            <tr>
                                <td>2024-01-15</td>
                                <td>Peter de Vries</td>
                                <td>14:30</td>
                                <td>16:00</td>
                                <td>€0.00</td>
                                <td><span class="badge badge-success">Gratis</span></td>
                            </tr>
                            <tr>
                                <td>2024-01-14</td>
                                <td>Anna Smit</td>
                                <td>09:00</td>
                                <td>12:30</td>
                                <td>€5.00</td>
                                <td><span class="badge badge-warning">Betaald</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Dispatch Section -->
                <div id="dispatch-section" class="content-section">
                    <h2>Dispatch - Handmatige Rit Plaatsing</h2>
                    <p>Plaats handmatig nieuwe ritten en beheer chauffeur toewijzingen</p>
                    
                    <!-- Quick Actions -->
                    <div class="form-grid" style="margin-bottom: 30px;">
                        <div class="stat-card">
                            <div class="stat-icon" style="font-size: 24px;">🚗</div>
                            <div class="stat-number" id="availableDrivers">8</div>
                            <div class="stat-label">Beschikbare Chauffeurs</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon" style="font-size: 24px;">⏰</div>
                            <div class="stat-number" id="pendingRides">3</div>
                            <div class="stat-label">Wachtende Ritten</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon" style="font-size: 24px;">📍</div>
                            <div class="stat-number" id="activeRides">5</div>
                            <div class="stat-label">Actieve Ritten</div>
                        </div>
                    </div>

                    <!-- Manual Ride Creation Form -->
                    <div class="pricing-section">
                        <h3>🆕 Nieuwe Rit Handmatig Plaatsen</h3>
                        <form id="manualRideForm">
                            <div class="form-grid">
                                <div>
                                    <div class="form-group">
                                        <label>Klant Naam</label>
                                        <input type="text" id="customerName" placeholder="Jan Janssen" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Telefoon</label>
                                        <input type="tel" id="customerPhone" placeholder="+31 6 12345678" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Email (optioneel)</label>
                                        <input type="email" id="customerEmail" placeholder="jan@example.com">
                                    </div>
                                </div>
                                <div>
                                    <div class="form-group">
                                        <label>Ophaal Adres</label>
                                        <input type="text" id="pickupAddress" placeholder="Dam Square 1, Amsterdam" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Bestemming</label>
                                        <input type="text" id="dropoffAddress" placeholder="Schiphol Airport" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Extra Stops (optioneel)</label>
                                        <textarea id="extraStops" rows="2" placeholder="Stop 1: Centraal Station&#10;Stop 2: Hotel ABC"></textarea>
                                    </div>
                                </div>
                            </div>

                            <div class="form-grid">
                                <div>
                                    <div class="form-group">
                                        <label>Datum</label>
                                        <input type="date" id="rideDate" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Tijd</label>
                                        <input type="time" id="rideTime" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Voertuig Type</label>
                                        <select id="vehicleType" required>
                                            <option value="">Selecteer voertuig</option>
                                            <option value="saloon">🚗 Saloon (3 personen)</option>
                                        </select>
                                    </div>
                                </div>
                                <div>
                                    <div class="form-group">
                                        <label>Aantal Passagiers</label>
                                        <input type="number" id="passengers" min="1" max="8" value="1" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Betaal Methode</label>
                                        <select id="paymentMethod" required>
                                            <option value="cash">💵 Cash</option>
                                            <option value="card">💳 Kaart</option>
                                            <option value="bank">🏦 Bank Transfer</option>
                                            <option value="account">📋 Op Rekening</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Geschatte Prijs (€)</label>
                                        <input type="number" id="estimatedPrice" step="0.50" placeholder="45.00">
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Opmerkingen</label>
                                <textarea id="rideNotes" rows="3" placeholder="Speciale instructies, bagage info, kinderstoelen, etc."></textarea>
                            </div>

                            <div class="form-grid">
                                <button type="submit" class="btn btn-primary">🚗 Rit Plaatsen</button>
                                <button type="button" class="btn btn-secondary" onclick="calculatePrice()">💰 Prijs Berekenen</button>
                            </div>
                        </form>
                    </div>

                    <!-- Driver Assignment -->
                    <div class="pricing-section">
                        <h3>👥 Beschikbare Chauffeurs</h3>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Naam</th>
                                    <th>Status</th>
                                    <th>Locatie</th>
                                    <th>Voertuig</th>
                                    <th>Rating</th>
                                    <th>Actie</th>
                                </tr>
                            </thead>
                            <tbody id="driversTable">
                                <tr>
                                    <td>Mohammed Ali<br><small>+31 6 11111111</small></td>
                                    <td><span class="badge badge-success">Beschikbaar</span></td>
                                    <td>Dam Square</td>
                                    <td>🚗 Mercedes E-Class</td>
                                    <td>⭐ 4.8</td>
                                    <td><button class="btn btn-sm" onclick="assignDriver('driver1')">Toewijzen</button></td>
                                </tr>
                                <tr>
                                    <td>Jan de Vries<br><small>+31 6 22222222</small></td>
                                    <td><span class="badge badge-warning">Onderweg</span></td>
                                    <td>Centraal Station</td>
                                    <td>🚙 BMW X3</td>
                                    <td>⭐ 4.9</td>
                                    <td><button class="btn btn-sm" disabled>Bezet</button></td>
                                </tr>
                                <tr>
                                    <td>Ahmed Hassan<br><small>+31 6 33333333</small></td>
                                    <td><span class="badge badge-success">Beschikbaar</span></td>
                                    <td>Schiphol</td>
                                    <td>🚐 Mercedes Vito</td>
                                    <td>⭐ 4.7</td>
                                    <td><button class="btn btn-sm" onclick="assignDriver('driver3')">Toewijzen</button></td>
                                </tr>
                                <tr>
                                    <td>Peter Bakker<br><small>+31 6 44444444</small></td>
                                    <td><span class="badge badge-success">Beschikbaar</span></td>
                                    <td>Vondelpark</td>
                                    <td>🚗 Audi A6</td>
                                    <td>⭐ 4.6</td>
                                    <td><button class="btn btn-sm" onclick="assignDriver('driver4')">Toewijzen</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Active Rides -->
                    <div class="pricing-section">
                        <h3>📍 Actieve Ritten</h3>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Rit ID</th>
                                    <th>Klant</th>
                                    <th>Chauffeur</th>
                                    <th>Route</th>
                                    <th>Status</th>
                                    <th>ETA</th>
                                    <th>Acties</th>
                                </tr>
                            </thead>
                            <tbody id="activeRidesTable">
                                <tr>
                                    <td>#R001</td>
                                    <td>Marie Janssen<br><small>+31 6 55555555</small></td>
                                    <td>Jan de Vries</td>
                                    <td>Dam → Schiphol</td>
                                    <td><span class="badge badge-warning">Onderweg</span></td>
                                    <td>15 min</td>
                                    <td>
                                        <button class="btn btn-sm" onclick="trackRide('R001')">📍 Volgen</button>
                                        <button class="btn btn-sm" onclick="contactDriver('driver2')">📞 Bellen</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>#R002</td>
                                    <td>Klaus Schmidt<br><small>+31 6 66666666</small></td>
                                    <td>Ahmed Hassan</td>
                                    <td>Hotel → Centraal</td>
                                    <td><span class="badge badge-success">Aangekomen</span></td>
                                    <td>Nu</td>
                                    <td>
                                        <button class="btn btn-sm" onclick="completeRide('R002')">✅ Afronden</button>
                                        <button class="btn btn-sm" onclick="contactDriver('driver3')">📞 Bellen</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Next 24h Bookings -->
                <div id="next-24h-section" class="content-section">
                    <h2>Next 24 Hours Bookings</h2>
                    <p>Upcoming bookings in the next 24 hours</p>
                    
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Customer</th>
                                <th>Route</th>
                                <th>Vehicle</th>
                                <th>Driver</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>08:30</td>
                                <td>Jan Janssen<br><small>+31 6 12345678</small></td>
                                <td>Dam → Schiphol</td>
                                <td>🚗 Saloon</td>
                                <td>Mohammed Ali</td>
                                <td><span class="badge badge-success">Confirmed</span></td>
                                <td><button class="btn btn-sm">View</button></td>
                            </tr>
                            <tr>
                                <td>14:00</td>
                                <td>Marie Bakker<br><small>+31 6 87654321</small></td>
                                <td>Hotel → Centraal</td>
                                <td>🚙 Estate</td>
                                <td>-</td>
                                <td><span class="badge badge-warning">Pending</span></td>
                                <td><button class="btn btn-sm">Assign Driver</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Latest Bookings -->
                <div id="latest-section" class="content-section">
                    <h2>Latest Bookings</h2>
                    <p>Most recent booking activity</p>
                    
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Created</th>
                                <th>Booking ID</th>
                                <th>Customer</th>
                                <th>Route</th>
                                <th>Amount</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>5 min ago</td>
                                <td>#TX1001</td>
                                <td>Peter de Vries</td>
                                <td>Vondelpark → RAI</td>
                                <td>€28.50</td>
                                <td><span class="badge badge-warning">New</span></td>
                                <td><button class="btn btn-primary btn-sm">Process</button></td>
                            </tr>
                            <tr>
                                <td>12 min ago</td>
                                <td>#TX1000</td>
                                <td>Anna Smit</td>
                                <td>Station → Airport</td>
                                <td>€45.00</td>
                                <td><span class="badge badge-success">Confirmed</span></td>
                                <td><button class="btn btn-sm">View</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Unconfirmed Bookings -->
                <div id="unconfirmed-section" class="content-section">
                    <h2>Unconfirmed Bookings</h2>
                    <p>Bookings awaiting confirmation</p>
                    
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Booking ID</th>
                                <th>Customer</th>
                                <th>Requested Time</th>
                                <th>Route</th>
                                <th>Payment</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>#TX1002</td>
                                <td>Klaus Schmidt<br><small>+31 6 55512345</small></td>
                                <td>Tomorrow 09:15</td>
                                <td>Hotel ABC → Centraal</td>
                                <td>Cash</td>
                                <td>
                                    <button class="btn btn-success btn-sm">Confirm</button>
                                    <button class="btn btn-danger btn-sm">Reject</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Completed Bookings -->
                <div id="completed-section" class="content-section">
                    <h2>Completed Bookings</h2>
                    <p>Successfully completed rides</p>
                    
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Booking ID</th>
                                <th>Customer</th>
                                <th>Driver</th>
                                <th>Route</th>
                                <th>Amount</th>
                                <th>Rating</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Today 12:30</td>
                                <td>#TX0998</td>
                                <td>Emma Johnson</td>
                                <td>Ahmed Hassan</td>
                                <td>Dam → Schiphol</td>
                                <td>€45.00</td>
                                <td>⭐⭐⭐⭐⭐</td>
                            </tr>
                            <tr>
                                <td>Today 10:15</td>
                                <td>#TX0997</td>
                                <td>Lucas Müller</td>
                                <td>Jan de Vries</td>
                                <td>Hotel → RAI</td>
                                <td>€32.50</td>
                                <td>⭐⭐⭐⭐</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Cancelled Bookings -->
                <div id="cancelled-section" class="content-section">
                    <h2>Cancelled Bookings</h2>
                    <p>Cancelled or failed bookings</p>
                    
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Booking ID</th>
                                <th>Customer</th>
                                <th>Route</th>
                                <th>Reason</th>
                                <th>Refund</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Yesterday</td>
                                <td>#TX0995</td>
                                <td>Sarah Wilson</td>
                                <td>Airport → Hotel</td>
                                <td>Customer cancelled</td>
                                <td>€3.00 fee</td>
                                <td><button class="btn btn-sm">Process Refund</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- All Bookings -->
                <div id="all-bookings-section" class="content-section">
                    <h2>All Bookings</h2>
                    <p>Complete booking history with filters</p>
                    
                    <div class="form-grid" style="margin-bottom: 20px;">
                        <div class="form-group">
                            <label>Date Range</label>
                            <input type="date" value="2024-01-01">
                        </div>
                        <div class="form-group">
                            <label>To</label>
                            <input type="date" value="2024-12-31">
                        </div>
                        <div class="form-group">
                            <label>Status</label>
                            <select>
                                <option>All Statuses</option>
                                <option>Confirmed</option>
                                <option>Completed</option>
                                <option>Cancelled</option>
                                <option>No-show</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Search</label>
                            <input type="text" placeholder="Customer name, phone, booking ID">
                        </div>
                    </div>
                    
                    <table class="table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Date</th>
                                <th>Customer</th>
                                <th>Route</th>
                                <th>Driver</th>
                                <th>Amount</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>#TX1001</td>
                                <td>2024-01-15 14:30</td>
                                <td>Jan Janssen</td>
                                <td>Dam → Schiphol</td>
                                <td>Mohammed Ali</td>
                                <td>€45.00</td>
                                <td><span class="badge badge-success">Completed</span></td>
                                <td>
                                    <button class="btn btn-sm">View</button>
                                    <button class="btn btn-sm">Edit</button>
                                    <button class="btn btn-sm">Invoice</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Calendar View -->
                <div id="calendar-section" class="content-section">
                    <h2>Booking Calendar</h2>
                    <p>Calendar view of all bookings</p>
                    
                    <div style="background: #f8f9fa; padding: 40px; text-align: center; border-radius: 8px;">
                        <h3>📅 Calendar View</h3>
                        <p>Interactive calendar with all bookings will be displayed here</p>
                        <button class="btn btn-primary">Today</button>
                        <button class="btn btn-secondary">Week</button>
                        <button class="btn btn-secondary">Month</button>
                    </div>
                </div>

                <!-- Add New Booking -->
                <div id="add-new-section" class="content-section">
                    <h2>Add New Booking</h2>
                    <p>Create a new booking manually</p>
                    
                    <div class="pricing-section">
                        <h3>Quick Booking Form</h3>
                        <div class="form-grid">
                            <div>
                                <div class="form-group">
                                    <label>Customer Name</label>
                                    <input type="text" placeholder="Jan Janssen" required>
                                </div>
                                <div class="form-group">
                                    <label>Phone</label>
                                    <input type="tel" placeholder="+31 6 12345678" required>
                                </div>
                                <div class="form-group">
                                    <label>Pickup Address</label>
                                    <input type="text" placeholder="Dam Square 1, Amsterdam" required>
                                </div>
                                <div class="form-group">
                                    <label>Destination</label>
                                    <input type="text" placeholder="Schiphol Airport" required>
                                </div>
                            </div>
                            <div>
                                <div class="form-group">
                                    <label>Date</label>
                                    <input type="date" required>
                                </div>
                                <div class="form-group">
                                    <label>Time</label>
                                    <input type="time" required>
                                </div>
                                <div class="form-group">
                                    <label>Vehicle Type</label>
                                    <select required>
                                        <option>🚗 Saloon</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Payment Method</label>
                                    <select required>
                                        <option>Cash</option>
                                        <option>Card</option>
                                        <option>Bank Transfer</option>
                                        <option>Corporate Account</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-primary">Create Booking</button>
                    </div>
                </div>

                <!-- Feedback Section -->
                <div id="feedback-section" class="content-section">
                    <h2>Customer Feedback</h2>
                    <p>Reviews and feedback from customers</p>
                    
                    <div class="stats-grid" style="margin-bottom: 30px;">
                        <div class="stat-card">
                            <div class="stat-number">4.8</div>
                            <div class="stat-label">Average Rating</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">156</div>
                            <div class="stat-label">Total Reviews</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">92%</div>
                            <div class="stat-label">Positive</div>
                        </div>
                    </div>
                    
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Customer</th>
                                <th>Driver</th>
                                <th>Rating</th>
                                <th>Comment</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Today</td>
                                <td>Emma Johnson</td>
                                <td>Ahmed Hassan</td>
                                <td>⭐⭐⭐⭐⭐</td>
                                <td>"Excellent service, very professional driver"</td>
                                <td><button class="btn btn-sm">Reply</button></td>
                            </tr>
                            <tr>
                                <td>Yesterday</td>
                                <td>Lucas Müller</td>
                                <td>Jan de Vries</td>
                                <td>⭐⭐⭐⭐</td>
                                <td>"Good service, arrived on time"</td>
                                <td><button class="btn btn-sm">Reply</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Knowledge Base -->
                <div id="knowledge-base-section" class="content-section">
                    <h2>Knowledge Base</h2>
                    <p>Help articles and documentation</p>
                    
                    <div class="form-grid">
                        <div class="stat-card">
                            <h3>📚 Getting Started</h3>
                            <p>Learn the basics of using the admin panel</p>
                            <button class="btn btn-primary">Read Guide</button>
                        </div>
                        <div class="stat-card">
                            <h3>🚗 Managing Bookings</h3>
                            <p>How to create, edit and manage bookings</p>
                            <button class="btn btn-primary">Read Guide</button>
                        </div>
                        <div class="stat-card">
                            <h3>💰 Pricing Setup</h3>
                            <p>Configure your pricing and surcharges</p>
                            <button class="btn btn-primary">Read Guide</button>
                        </div>
                        <div class="stat-card">
                            <h3>📞 Customer Support</h3>
                            <p>Contact support for help</p>
                            <button class="btn btn-primary">Contact Us</button>
                        </div>
                    </div>
                </div>

                <!-- Updates -->
                <div id="updates-section" class="content-section">
                    <h2>System Updates</h2>
                    <p>Latest updates and changelog</p>
                    
                    <div class="pricing-section">
                        <h3>Recent Updates</h3>
                        <div style="border-left: 4px solid #3498db; padding-left: 20px; margin-bottom: 20px;">
                            <h4>Version 2.1.0 - January 15, 2024</h4>
                            <ul>
                                <li>Added real-time GPS tracking</li>
                                <li>Improved booking calendar view</li>
                                <li>Enhanced no-show management</li>
                                <li>Bug fixes and performance improvements</li>
                            </ul>
                        </div>
                        <div style="border-left: 4px solid #2ecc71; padding-left: 20px;">
                            <h4>Version 2.0.5 - January 10, 2024</h4>
                            <ul>
                                <li>Added distance modifier pricing</li>
                                <li>Enhanced security deposits</li>
                                <li>Improved mobile responsiveness</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Driver Report -->
                <div id="driver-report-section" class="content-section">
                    <h2>Driver Report</h2>
                    <p>Performance and earnings reports for all drivers</p>
                    
                    <!-- Date Range Filter -->
                    <div class="pricing-section">
                        <h3>Report Filters</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Date From</label>
                                <input type="date" value="2024-01-01">
                            </div>
                            <div class="form-group">
                                <label>Date To</label>
                                <input type="date" value="2024-01-31">
                            </div>
                            <div class="form-group">
                                <label>Driver</label>
                                <select>
                                    <option>All Drivers</option>
                                    <option>Mohammed Ali</option>
                                    <option>Jan de Vries</option>
                                    <option>Ahmed Hassan</option>
                                    <option>Peter Bakker</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Report Type</label>
                                <select>
                                    <option>Summary</option>
                                    <option>Detailed</option>
                                    <option>Performance</option>
                                    <option>Earnings</option>
                                </select>
                            </div>
                        </div>
                        <button class="btn btn-primary">Generate Report</button>
                        <button class="btn btn-secondary">Export PDF</button>
                        <button class="btn btn-secondary">Export Excel</button>
                    </div>
                    
                    <!-- Driver Summary Stats -->
                    <div class="stats-grid" style="margin-bottom: 30px;">
                        <div class="stat-card">
                            <div class="stat-number">4</div>
                            <div class="stat-label">Active Drivers</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">127</div>
                            <div class="stat-label">Total Rides</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">€3,245</div>
                            <div class="stat-label">Total Earnings</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">4.7⭐</div>
                            <div class="stat-label">Avg Rating</div>
                        </div>
                    </div>
                    
                    <!-- Driver Performance Table -->
                    <h3>Driver Performance</h3>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Driver</th>
                                <th>Total Rides</th>
                                <th>Completed</th>
                                <th>Cancelled</th>
                                <th>Total Earnings</th>
                                <th>Commission</th>
                                <th>Net Earnings</th>
                                <th>Avg Rating</th>
                                <th>Online Hours</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <strong>Mohammed Ali</strong><br>
                                    <small>+31 6 11111111</small><br>
                                    <small>License: ABC123</small>
                                </td>
                                <td>45</td>
                                <td><span class="badge badge-success">43</span></td>
                                <td><span class="badge badge-danger">2</span></td>
                                <td>€1,250.00</td>
                                <td>€187.50</td>
                                <td>€1,062.50</td>
                                <td>⭐ 4.8</td>
                                <td>156h</td>
                                <td>
                                    <button class="btn btn-sm">View Details</button>
                                    <button class="btn btn-sm">Send Report</button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Jan de Vries</strong><br>
                                    <small>+31 6 22222222</small><br>
                                    <small>License: DEF456</small>
                                </td>
                                <td>38</td>
                                <td><span class="badge badge-success">36</span></td>
                                <td><span class="badge badge-danger">2</span></td>
                                <td>€985.00</td>
                                <td>€147.75</td>
                                <td>€837.25</td>
                                <td>⭐ 4.9</td>
                                <td>142h</td>
                                <td>
                                    <button class="btn btn-sm">View Details</button>
                                    <button class="btn btn-sm">Send Report</button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Ahmed Hassan</strong><br>
                                    <small>+31 6 33333333</small><br>
                                    <small>License: GHI789</small>
                                </td>
                                <td>32</td>
                                <td><span class="badge badge-success">30</span></td>
                                <td><span class="badge badge-danger">2</span></td>
                                <td>€780.00</td>
                                <td>€117.00</td>
                                <td>€663.00</td>
                                <td>⭐ 4.7</td>
                                <td>118h</td>
                                <td>
                                    <button class="btn btn-sm">View Details</button>
                                    <button class="btn btn-sm">Send Report</button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Peter Bakker</strong><br>
                                    <small>+31 6 44444444</small><br>
                                    <small>License: JKL012</small>
                                </td>
                                <td>12</td>
                                <td><span class="badge badge-success">11</span></td>
                                <td><span class="badge badge-danger">1</span></td>
                                <td>€230.00</td>
                                <td>€34.50</td>
                                <td>€195.50</td>
                                <td>⭐ 4.6</td>
                                <td>45h</td>
                                <td>
                                    <button class="btn btn-sm">View Details</button>
                                    <button class="btn btn-sm">Send Report</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Payment Report -->
                <div id="payment-report-section" class="content-section">
                    <h2>Payment Report</h2>
                    <p>Financial overview and payment method analysis</p>
                    
                    <!-- Date Range Filter -->
                    <div class="pricing-section">
                        <h3>Report Filters</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Date From</label>
                                <input type="date" value="2024-01-01">
                            </div>
                            <div class="form-group">
                                <label>Date To</label>
                                <input type="date" value="2024-01-31">
                            </div>
                            <div class="form-group">
                                <label>Payment Method</label>
                                <select>
                                    <option>All Methods</option>
                                    <option>Cash</option>
                                    <option>Card</option>
                                    <option>Bank Transfer</option>
                                    <option>Corporate Account</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Status</label>
                                <select>
                                    <option>All Payments</option>
                                    <option>Completed</option>
                                    <option>Pending</option>
                                    <option>Failed</option>
                                    <option>Refunded</option>
                                </select>
                            </div>
                        </div>
                        <button class="btn btn-primary">Generate Report</button>
                        <button class="btn btn-secondary">Export PDF</button>
                        <button class="btn btn-secondary">Export Excel</button>
                    </div>
                    
                    <!-- Payment Summary Stats -->
                    <div class="stats-grid" style="margin-bottom: 30px;">
                        <div class="stat-card">
                            <div class="stat-number">€8,450</div>
                            <div class="stat-label">Total Revenue</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">€1,267</div>
                            <div class="stat-label">Commission Earned</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">€7,183</div>
                            <div class="stat-label">Driver Earnings</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">€247</div>
                            <div class="stat-label">Fees & Taxes</div>
                        </div>
                    </div>
                    
                    <!-- Payment Methods Breakdown -->
                    <div class="pricing-section">
                        <h3>Payment Methods Breakdown</h3>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon" style="font-size: 24px;">💵</div>
                                <div class="stat-number">€3,420</div>
                                <div class="stat-label">Cash Payments (40.5%)</div>
                                <div style="font-size: 12px; margin-top: 5px;">127 transactions</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon" style="font-size: 24px;">💳</div>
                                <div class="stat-number">€2,890</div>
                                <div class="stat-label">Card Payments (34.2%)</div>
                                <div style="font-size: 12px; margin-top: 5px;">89 transactions</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon" style="font-size: 24px;">🏦</div>
                                <div class="stat-number">€1,560</div>
                                <div class="stat-label">Bank Transfer (18.5%)</div>
                                <div style="font-size: 12px; margin-top: 5px;">43 transactions</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon" style="font-size: 24px;">🏢</div>
                                <div class="stat-number">€580</div>
                                <div class="stat-label">Corporate (6.8%)</div>
                                <div style="font-size: 12px; margin-top: 5px;">12 transactions</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Detailed Payment Table -->
                    <h3>Payment Transactions</h3>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Booking ID</th>
                                <th>Customer</th>
                                <th>Driver</th>
                                <th>Method</th>
                                <th>Amount</th>
                                <th>Commission</th>
                                <th>Driver Earnings</th>
                                <th>Tax</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>2024-01-15 14:30</td>
                                <td>#TX1001</td>
                                <td>Jan Janssen</td>
                                <td>Mohammed Ali</td>
                                <td><span class="badge" style="background: #d4edda;">💵 Cash</span></td>
                                <td>€45.00</td>
                                <td>€6.75</td>
                                <td>€38.25</td>
                                <td>€7.81</td>
                                <td><span class="badge badge-success">Completed</span></td>
                                <td>
                                    <button class="btn btn-sm">View</button>
                                    <button class="btn btn-sm">Invoice</button>
                                </td>
                            </tr>
                            <tr>
                                <td>2024-01-15 12:15</td>
                                <td>#TX1000</td>
                                <td>Marie Bakker</td>
                                <td>Jan de Vries</td>
                                <td><span class="badge" style="background: #cce5ff;">💳 Card</span></td>
                                <td>€32.50</td>
                                <td>€4.88</td>
                                <td>€27.63</td>
                                <td>€5.64</td>
                                <td><span class="badge badge-success">Completed</span></td>
                                <td>
                                    <button class="btn btn-sm">View</button>
                                    <button class="btn btn-sm">Invoice</button>
                                </td>
                            </tr>
                            <tr>
                                <td>2024-01-15 10:00</td>
                                <td>#TX0999</td>
                                <td>Peter de Vries</td>
                                <td>Ahmed Hassan</td>
                                <td><span class="badge" style="background: #fff3cd;">🏦 Transfer</span></td>
                                <td>€28.00</td>
                                <td>€4.20</td>
                                <td>€23.80</td>
                                <td>€4.86</td>
                                <td><span class="badge badge-warning">Pending</span></td>
                                <td>
                                    <button class="btn btn-sm">View</button>
                                    <button class="btn btn-sm">Process</button>
                                </td>
                            </tr>
                            <tr>
                                <td>2024-01-14 16:45</td>
                                <td>#TX0998</td>
                                <td>Corporate ABC</td>
                                <td>Peter Bakker</td>
                                <td><span class="badge" style="background: #e2e3e5;">🏢 Corporate</span></td>
                                <td>€65.00</td>
                                <td>€9.75</td>
                                <td>€55.25</td>
                                <td>€11.28</td>
                                <td><span class="badge badge-success">Completed</span></td>
                                <td>
                                    <button class="btn btn-sm">View</button>
                                    <button class="btn btn-sm">Invoice</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <!-- Outstanding Payments -->
                    <div class="pricing-section">
                        <h3>⚠️ Outstanding Payments</h3>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Booking ID</th>
                                    <th>Customer</th>
                                    <th>Amount</th>
                                    <th>Method</th>
                                    <th>Days Overdue</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>#TX0995</td>
                                    <td>Klaus Schmidt</td>
                                    <td>€38.50</td>
                                    <td>Bank Transfer</td>
                                    <td><span class="badge badge-danger">3 days</span></td>
                                    <td>
                                        <button class="btn btn-warning btn-sm">Send Reminder</button>
                                        <button class="btn btn-danger btn-sm">Mark Failed</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Driver Activities -->
                <div id="driver-activities-section" class="content-section">
                    <h2>Driver Activities</h2>
                    <p>Monitor driver activities and online status</p>
                    
                    <!-- Activity Overview -->
                    <div class="stats-grid" style="margin-bottom: 30px;">
                        <div class="stat-card">
                            <div class="stat-number">3</div>
                            <div class="stat-label">Online Now</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">1</div>
                            <div class="stat-label">On Trip</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">2</div>
                            <div class="stat-label">Available</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">1</div>
                            <div class="stat-label">Offline</div>
                        </div>
                    </div>
                    
                    <!-- Real-time Driver Status -->
                    <h3>Live Driver Status</h3>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Driver</th>
                                <th>Status</th>
                                <th>Current Location</th>
                                <th>Last Activity</th>
                                <th>Online Time Today</th>
                                <th>Current Trip</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <strong>Mohammed Ali</strong><br>
                                    <small>+31 6 11111111</small>
                                </td>
                                <td><span class="badge badge-warning">On Trip</span></td>
                                <td>📍 En route to Schiphol</td>
                                <td>2 min ago</td>
                                <td>6h 23m</td>
                                <td>#TX1001 - ETA 15 min</td>
                                <td>
                                    <button class="btn btn-sm">📍 Track</button>
                                    <button class="btn btn-sm">📞 Call</button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Jan de Vries</strong><br>
                                    <small>+31 6 22222222</small>
                                </td>
                                <td><span class="badge badge-success">Available</span></td>
                                <td>📍 Dam Square</td>
                                <td>1 min ago</td>
                                <td>5h 45m</td>
                                <td>-</td>
                                <td>
                                    <button class="btn btn-sm">🚗 Assign Trip</button>
                                    <button class="btn btn-sm">📞 Call</button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Ahmed Hassan</strong><br>
                                    <small>+31 6 33333333</small>
                                </td>
                                <td><span class="badge badge-success">Available</span></td>
                                <td>📍 Centraal Station</td>
                                <td>30 sec ago</td>
                                <td>4h 12m</td>
                                <td>-</td>
                                <td>
                                    <button class="btn btn-sm">🚗 Assign Trip</button>
                                    <button class="btn btn-sm">📞 Call</button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Peter Bakker</strong><br>
                                    <small>+31 6 44444444</small>
                                </td>
                                <td><span class="badge badge-danger">Offline</span></td>
                                <td>📍 Last seen: Vondelpark</td>
                                <td>2h 15m ago</td>
                                <td>3h 30m</td>
                                <td>-</td>
                                <td>
                                    <button class="btn btn-sm">📞 Call</button>
                                    <button class="btn btn-sm">📧 Message</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <!-- Activity Timeline -->
                    <div class="pricing-section">
                        <h3>Recent Activities</h3>
                        <div style="max-height: 300px; overflow-y: auto;">
                            <div style="border-left: 3px solid #28a745; padding-left: 15px; margin-bottom: 15px;">
                                <strong>14:32</strong> - Mohammed Ali started trip #TX1001<br>
                                <small>Route: Dam → Schiphol | Customer: Jan Janssen</small>
                            </div>
                            <div style="border-left: 3px solid #17a2b8; padding-left: 15px; margin-bottom: 15px;">
                                <strong>14:28</strong> - Jan de Vries came online<br>
                                <small>Location: Dam Square</small>
                            </div>
                            <div style="border-left: 3px solid #ffc107; padding-left: 15px; margin-bottom: 15px;">
                                <strong>14:15</strong> - Ahmed Hassan completed trip #TX1000<br>
                                <small>Earnings: €32.50 | Rating: ⭐⭐⭐⭐⭐</small>
                            </div>
                            <div style="border-left: 3px solid #dc3545; padding-left: 15px; margin-bottom: 15px;">
                                <strong>12:17</strong> - Peter Bakker went offline<br>
                                <small>Total online time: 3h 30m</small>
                            </div>
                            <div style="border-left: 3px solid #6c757d; padding-left: 15px; margin-bottom: 15px;">
                                <strong>11:45</strong> - System: Driver check-in reminders sent<br>
                                <small>Sent to 2 inactive drivers</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Types of Vehicles -->
                <div id="types-of-vehicles-section" class="content-section">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 30px;">
                        <div>
                            <h2 style="margin: 0; color: #2c3e50; font-size: 28px; font-weight: 600;">Types of Vehicles</h2>
                            <p style="margin: 5px 0 0 0; color: #6c757d; font-size: 16px;">Manage your vehicle fleet - upload photos and configure specifications</p>
                        </div>
                        <div style="display: flex; gap: 12px; align-items: center;">
                            <button class="btn btn-success" onclick="openAddVehicleModal()" style="padding: 12px 20px; font-weight: 600; box-shadow: 0 2px 8px rgba(40, 167, 69, 0.3); transition: all 0.3s;">
                                ➕ Add New Vehicle
                            </button>
                            <button class="btn btn-primary" onclick="syncToBookingSystem()" style="padding: 12px 20px; font-weight: 600; box-shadow: 0 2px 8px rgba(52, 152, 219, 0.3);">
                                🔄 Sync to Booking System
                            </button>
                            <button class="btn btn-secondary" onclick="window.open('/booking-exact.html', '_blank')" style="padding: 12px 20px; font-weight: 600;">
                                👀 Preview Booking System
                            </button>
                        </div>
                    </div>

                    <!-- Success/Error Messages -->
                    <div id="vehicleSuccessMsg" style="display: none; background: #d4edda; color: #155724; padding: 12px 20px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #28a745;">
                        <strong>✅ Success!</strong> <span id="successText"></span>
                    </div>
                    <div id="vehicleErrorMsg" style="display: none; background: #f8d7da; color: #721c24; padding: 12px 20px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #dc3545;">
                        <strong>❌ Error!</strong> <span id="errorText"></span>
                    </div>

                    <!-- Vehicle Management Table -->
                    <div style="overflow-x: auto;">
                        <table class="table" style="min-width: 1400px;">
                            <thead>
                                <tr>
                                    <th style="width: 100px;">Image</th>
                                    <th style="width: 150px;">Name</th>
                                    <th style="width: 100px;">Driver</th>
                                    <th style="width: 120px;">Services</th>
                                    <th style="width: 100px;">Hourly rate</th>
                                    <th style="width: 150px;">Capacity</th>
                                    <th style="width: 80px;">Enquire</th>
                                    <th style="width: 80px;">Default</th>
                                    <th style="width: 80px;">Active</th>
                                    <th style="width: 80px;">Ordering</th>
                                    <th style="width: 150px;">Display</th>
                                    <th style="width: 120px;">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="vehicleTableBody">
                                <!-- Vehicle rows will be populated here -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Professional Vehicle Modal -->
                    <div id="vehicleModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 1000; backdrop-filter: blur(3px);">
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; border-radius: 16px; padding: 0; max-width: 700px; width: 95%; max-height: 90vh; overflow: hidden; box-shadow: 0 20px 60px rgba(0,0,0,0.3);">
                            <!-- Modal Header -->
                            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px 30px; display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <h3 id="modalTitle" style="margin: 0; font-size: 22px; font-weight: 600;">Add New Vehicle</h3>
                                    <p style="margin: 5px 0 0 0; opacity: 0.9; font-size: 14px;">Configure vehicle specifications and upload photo</p>
                                </div>
                                <button onclick="closeVehicleModal()" style="background: rgba(255,255,255,0.2); border: none; color: white; width: 40px; height: 40px; border-radius: 50%; font-size: 20px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'">&times;</button>
                            </div>
                            
                            <!-- Modal Body with Scroll -->
                            <div style="padding: 30px; overflow-y: auto; max-height: calc(90vh - 160px);">
                            
                            <form id="vehicleForm">
                                <!-- Professional Image Upload Section -->
                                <div style="margin-bottom: 25px;">
                                    <label style="display: block; font-weight: 600; color: #2c3e50; margin-bottom: 8px; font-size: 16px;">
                                        🖼️ Vehicle Photo *
                                    </label>
                                    <div id="imageUploadArea" 
                                         style="border: 3px dashed #e1e5e9; border-radius: 12px; padding: 30px; text-align: center; transition: all 0.3s ease; cursor: pointer; background: #f8f9fa; position: relative; overflow: hidden;"
                                         ondrop="handleImageDrop(event)" 
                                         ondragover="handleDragOver(event)"
                                         ondragleave="handleDragLeave(event)"
                                         onclick="document.getElementById('vehicleImageInput').click()">
                                        
                                        <!-- Image Preview -->
                                        <div id="imagePreview" style="position: relative; margin-bottom: 15px;">
                                            <img id="vehicleImagePreview" style="max-width: 100%; max-height: 200px; border-radius: 12px; display: none; box-shadow: 0 4px 12px rgba(0,0,0,0.15);" />
                                            <button type="button" id="removeImageBtn" onclick="removeVehicleImage(event)" 
                                                    style="position: absolute; top: 10px; right: 10px; background: #dc3545; color: white; border: none; width: 30px; height: 30px; border-radius: 50%; font-size: 14px; cursor: pointer; display: none; box-shadow: 0 2px 8px rgba(220,53,69,0.3);">
                                                ✕
                                            </button>
                                        </div>
                                        
                                        <!-- Upload Placeholder -->
                                        <div id="imagePlaceholder">
                                            <div style="font-size: 64px; margin-bottom: 15px; color: #6c757d;">📸</div>
                                            <div style="font-size: 18px; font-weight: 600; color: #495057; margin-bottom: 8px;">
                                                Drag & drop your vehicle photo here
                                            </div>
                                            <div style="font-size: 14px; color: #6c757d; margin-bottom: 15px;">
                                                or click to browse your files
                                            </div>
                                            <div style="font-size: 12px; color: #868e96; padding: 8px 16px; background: white; border-radius: 20px; display: inline-block;">
                                                📁 JPG, PNG, WebP • Max 5MB • Recommended: 800x400px
                                            </div>
                                        </div>
                                        
                                        <input type="file" id="vehicleImageInput" accept="image/*" style="display: none;" onchange="handleImageSelect(event)">
                                    </div>
                                </div>

                                <!-- Professional Vehicle Details -->
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px;">
                                    <div>
                                        <label style="display: block; font-weight: 600; color: #2c3e50; margin-bottom: 8px; font-size: 14px;">
                                            🚗 Vehicle Name *
                                        </label>
                                        <input type="text" id="vehicleName" required placeholder="e.g., Premium Business Class"
                                               style="width: 100%; padding: 12px 16px; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 14px; transition: all 0.3s; background: white;"
                                               onfocus="this.style.borderColor='#3498db'; this.style.boxShadow='0 0 0 3px rgba(52,152,219,0.1)'"
                                               onblur="this.style.borderColor='#e1e5e9'; this.style.boxShadow='none'">
                                    </div>
                                    <div>
                                        <label style="display: block; font-weight: 600; color: #2c3e50; margin-bottom: 8px; font-size: 14px;">
                                            💰 Base Price (€) *
                                        </label>
                                        <input type="number" id="vehiclePrice" required placeholder="25.00" step="0.01" min="0"
                                               style="width: 100%; padding: 12px 16px; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 14px; transition: all 0.3s; background: white;"
                                               onfocus="this.style.borderColor='#3498db'; this.style.boxShadow='0 0 0 3px rgba(52,152,219,0.1)'"
                                               onblur="this.style.borderColor='#e1e5e9'; this.style.boxShadow='none'">
                                    </div>
                                    <div>
                                        <label style="display: block; font-weight: 600; color: #2c3e50; margin-bottom: 8px; font-size: 14px;">
                                            ⏰ Hourly Rate (€)
                                        </label>
                                        <input type="number" id="vehicleHourlyRate" placeholder="0" step="0.01" min="0"
                                               style="width: 100%; padding: 12px 16px; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 14px; transition: all 0.3s; background: white;"
                                               onfocus="this.style.borderColor='#3498db'; this.style.boxShadow='0 0 0 3px rgba(52,152,219,0.1)'"
                                               onblur="this.style.borderColor='#e1e5e9'; this.style.boxShadow='none'">
                                    </div>
                                    <div>
                                        <label style="display: block; font-weight: 600; color: #2c3e50; margin-bottom: 8px; font-size: 14px;">
                                            🎯 Services
                                        </label>
                                        <select id="vehicleServices"
                                                style="width: 100%; padding: 12px 16px; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 14px; transition: all 0.3s; background: white;"
                                                onfocus="this.style.borderColor='#3498db'; this.style.boxShadow='0 0 0 3px rgba(52,152,219,0.1)'"
                                                onblur="this.style.borderColor='#e1e5e9'; this.style.boxShadow='none'">
                                            <option value="All">All Services</option>
                                            <option value="Airport">Airport Transfers</option>
                                            <option value="City">City Rides</option>
                                            <option value="Long Distance">Long Distance</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label style="display: block; font-weight: 600; color: #2c3e50; margin-bottom: 8px; font-size: 14px;">
                                            👁️ Display Option
                                        </label>
                                        <select id="vehicleDisplay"
                                                style="width: 100%; padding: 12px 16px; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 14px; transition: all 0.3s; background: white;"
                                                onfocus="this.style.borderColor='#3498db'; this.style.boxShadow='0 0 0 3px rgba(52,152,219,0.1)'"
                                                onblur="this.style.borderColor='#e1e5e9'; this.style.boxShadow='none'">
                                            <option value="Frontend & Backend">Frontend & Backend</option>
                                            <option value="Frontend Only">Frontend Only</option>
                                            <option value="Backend Only">Backend Only</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label style="display: block; font-weight: 600; color: #2c3e50; margin-bottom: 8px; font-size: 14px;">
                                            📊 Sort Order
                                        </label>
                                        <input type="number" id="vehicleOrdering" placeholder="0" min="0"
                                               style="width: 100%; padding: 12px 16px; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 14px; transition: all 0.3s; background: white;"
                                               onfocus="this.style.borderColor='#3498db'; this.style.boxShadow='0 0 0 3px rgba(52,152,219,0.1)'"
                                               onblur="this.style.borderColor='#e1e5e9'; this.style.boxShadow='none'">
                                    </div>
                                </div>

                                <!-- Professional Capacity Section -->
                                <div style="margin-bottom: 25px;">
                                    <label style="display: block; font-weight: 600; color: #2c3e50; margin-bottom: 15px; font-size: 16px;">
                                        👥 Vehicle Capacity & Features
                                    </label>
                                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px;">
                                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; text-align: center; border: 2px solid #e9ecef; transition: all 0.3s;">
                                            <div style="font-size: 24px; margin-bottom: 8px;">👤</div>
                                            <label style="display: block; font-weight: 600; color: #495057; margin-bottom: 8px; font-size: 12px;">Passengers</label>
                                            <input type="number" id="vehiclePassengers" placeholder="4" min="1" max="20" value="4"
                                                   style="width: 100%; padding: 8px 12px; border: 1px solid #dee2e6; border-radius: 6px; font-size: 14px; text-align: center; font-weight: 600;"
                                                   onfocus="this.parentElement.style.borderColor='#3498db'; this.parentElement.style.background='#f0f8ff'"
                                                   onblur="this.parentElement.style.borderColor='#e9ecef'; this.parentElement.style.background='#f8f9fa'">
                                        </div>
                                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; text-align: center; border: 2px solid #e9ecef; transition: all 0.3s;">
                                            <div style="font-size: 24px; margin-bottom: 8px;">🧳</div>
                                            <label style="display: block; font-weight: 600; color: #495057; margin-bottom: 8px; font-size: 12px;">Large Luggage</label>
                                            <input type="number" id="vehicleLargeLuggage" placeholder="2" min="0" max="20" value="2"
                                                   style="width: 100%; padding: 8px 12px; border: 1px solid #dee2e6; border-radius: 6px; font-size: 14px; text-align: center; font-weight: 600;"
                                                   onfocus="this.parentElement.style.borderColor='#3498db'; this.parentElement.style.background='#f0f8ff'"
                                                   onblur="this.parentElement.style.borderColor='#e9ecef'; this.parentElement.style.background='#f8f9fa'">
                                        </div>
                                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; text-align: center; border: 2px solid #e9ecef; transition: all 0.3s;">
                                            <div style="font-size: 24px; margin-bottom: 8px;">👜</div>
                                            <label style="display: block; font-weight: 600; color: #495057; margin-bottom: 8px; font-size: 12px;">Hand Luggage</label>
                                            <input type="number" id="vehicleSmallLuggage" placeholder="2" min="0" max="20" value="2"
                                                   style="width: 100%; padding: 8px 12px; border: 1px solid #dee2e6; border-radius: 6px; font-size: 14px; text-align: center; font-weight: 600;"
                                                   onfocus="this.parentElement.style.borderColor='#3498db'; this.parentElement.style.background='#f0f8ff'"
                                                   onblur="this.parentElement.style.borderColor='#e9ecef'; this.parentElement.style.background='#f8f9fa'">
                                        </div>
                                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; text-align: center; border: 2px solid #e9ecef; transition: all 0.3s;">
                                            <div style="font-size: 24px; margin-bottom: 8px;">👶</div>
                                            <label style="display: block; font-weight: 600; color: #495057; margin-bottom: 8px; font-size: 12px;">Child Seats</label>
                                            <input type="number" id="vehicleChildSeats" placeholder="0" min="0" max="5" value="0"
                                                   style="width: 100%; padding: 8px 12px; border: 1px solid #dee2e6; border-radius: 6px; font-size: 14px; text-align: center; font-weight: 600;"
                                                   onfocus="this.parentElement.style.borderColor='#3498db'; this.parentElement.style.background='#f0f8ff'"
                                                   onblur="this.parentElement.style.borderColor='#e9ecef'; this.parentElement.style.background='#f8f9fa'">
                                        </div>
                                    </div>
                                </div>

                                <!-- Professional Features Section -->
                                <div style="margin-bottom: 25px;">
                                    <label style="display: block; font-weight: 600; color: #2c3e50; margin-bottom: 15px; font-size: 16px;">
                                        ⚙️ Vehicle Settings
                                    </label>
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                        <label style="display: flex; align-items: center; gap: 12px; padding: 12px; background: #f8f9fa; border-radius: 8px; cursor: pointer; transition: all 0.3s; border: 2px solid transparent;"
                                               onmouseover="this.style.background='#e3f2fd'; this.style.borderColor='#3498db'"
                                               onmouseout="this.style.background='#f8f9fa'; this.style.borderColor='transparent'">
                                            <input type="checkbox" id="vehicleEnquire" style="width: 18px; height: 18px; accent-color: #3498db;">
                                            <span style="font-weight: 500; color: #495057;">📧 Enquire Only</span>
                                        </label>
                                        <label style="display: flex; align-items: center; gap: 12px; padding: 12px; background: #f8f9fa; border-radius: 8px; cursor: pointer; transition: all 0.3s; border: 2px solid transparent;"
                                               onmouseover="this.style.background='#e3f2fd'; this.style.borderColor='#3498db'"
                                               onmouseout="this.style.background='#f8f9fa'; this.style.borderColor='transparent'">
                                            <input type="checkbox" id="vehicleDefault" style="width: 18px; height: 18px; accent-color: #28a745;">
                                            <span style="font-weight: 500; color: #495057;">⭐ Default Vehicle</span>
                                        </label>
                                        <label style="display: flex; align-items: center; gap: 12px; padding: 12px; background: #d4edda; border-radius: 8px; cursor: pointer; transition: all 0.3s; border: 2px solid transparent;"
                                               onmouseover="this.style.background='#c3e6cb'; this.style.borderColor='#28a745'"
                                               onmouseout="this.style.background='#d4edda'; this.style.borderColor='transparent'">
                                            <input type="checkbox" id="vehicleActive" checked style="width: 18px; height: 18px; accent-color: #28a745;">
                                            <span style="font-weight: 500; color: #155724;">✅ Active</span>
                                        </label>
                                        <label style="display: flex; align-items: center; gap: 12px; padding: 12px; background: #f8f9fa; border-radius: 8px; cursor: pointer; transition: all 0.3s; border: 2px solid transparent;"
                                               onmouseover="this.style.background='#e3f2fd'; this.style.borderColor='#3498db'"
                                               onmouseout="this.style.background='#f8f9fa'; this.style.borderColor='transparent'">
                                            <input type="checkbox" id="vehicleAircon" style="width: 18px; height: 18px; accent-color: #17a2b8;">
                                            <span style="font-weight: 500; color: #495057;">❄️ Air Conditioning</span>
                                        </label>
                                    </div>
                                </div>

                                <!-- Professional Description -->
                                <div style="margin-bottom: 30px;">
                                    <label style="display: block; font-weight: 600; color: #2c3e50; margin-bottom: 8px; font-size: 16px;">
                                        📝 Vehicle Description
                                    </label>
                                    <textarea id="vehicleDescription" rows="4" placeholder="Enter a detailed description of the vehicle, its features, and what makes it special for customers..."
                                              style="width: 100%; padding: 15px; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 14px; line-height: 1.5; resize: vertical; font-family: inherit; transition: all 0.3s;"
                                              onfocus="this.style.borderColor='#3498db'; this.style.boxShadow='0 0 0 3px rgba(52,152,219,0.1)'"
                                              onblur="this.style.borderColor='#e1e5e9'; this.style.boxShadow='none'"></textarea>
                                </div>
                            </form>
                            </div>
                            
                            <!-- Professional Modal Footer -->
                            <div style="background: #f8f9fa; padding: 20px 30px; display: flex; gap: 12px; justify-content: flex-end; border-top: 1px solid #e9ecef;">
                                <button type="button" onclick="closeVehicleModal()" 
                                        style="padding: 12px 24px; border: 2px solid #6c757d; background: transparent; color: #6c757d; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.3s;"
                                        onmouseover="this.style.background='#6c757d'; this.style.color='white'"
                                        onmouseout="this.style.background='transparent'; this.style.color='#6c757d'">
                                    ✕ Cancel
                                </button>
                                <button type="button" onclick="saveVehicleData()" 
                                        style="padding: 12px 24px; border: none; background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.3s; box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);"
                                        onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 16px rgba(40, 167, 69, 0.4)'"
                                        onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(40, 167, 69, 0.3)'">
                                    💾 Save Vehicle
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Profile -->
                <div id="profile-section" class="content-section">
                    <h2>Profile Settings</h2>
                    <p>Manage your account and preferences</p>
                    
                    <div class="form-grid">
                        <div>
                            <div class="form-group">
                                <label>Name</label>
                                <input type="text" value="Marcel" required>
                            </div>
                            <div class="form-group">
                                <label>Email</label>
                                <input type="email" value="marcel@taxi.com" required>
                            </div>
                            <div class="form-group">
                                <label>Phone</label>
                                <input type="tel" value="+31 6 12345678">
                            </div>
                        </div>
                        <div>
                            <div class="form-group">
                                <label>Current Password</label>
                                <input type="password">
                            </div>
                            <div class="form-group">
                                <label>New Password</label>
                                <input type="password">
                            </div>
                            <div class="form-group">
                                <label>Confirm Password</label>
                                <input type="password">
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary">Save Changes</button>
                    <button class="btn btn-secondary">Cancel</button>
                </div>

                <!-- Bookings Sections -->
                <div id="next-24h-section" class="content-section">
                    <h2>📋 Next 24 Hours</h2>
                    <p>Upcoming bookings in the next 24 hours</p>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number">12</div>
                            <div class="stat-label">Upcoming Rides</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">3</div>
                            <div class="stat-label">Airport Transfers</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">€450</div>
                            <div class="stat-label">Expected Revenue</div>
                        </div>
                    </div>
                </div>

                <div id="latest-section" class="content-section">
                    <h2>📋 Latest Bookings</h2>
                    <p>Most recent booking requests</p>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number">5</div>
                            <div class="stat-label">New Today</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">18</div>
                            <div class="stat-label">This Week</div>
                        </div>
                    </div>
                </div>

                <div id="unconfirmed-section" class="content-section">
                    <h2>📋 Unconfirmed Bookings</h2>
                    <p>Bookings waiting for confirmation</p>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number">2</div>
                            <div class="stat-label">Pending</div>
                        </div>
                    </div>
                </div>

                <div id="completed-section" class="content-section">
                    <h2>📋 Completed Bookings</h2>
                    <p>Successfully completed rides</p>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number">156</div>
                            <div class="stat-label">This Month</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">€4,280</div>
                            <div class="stat-label">Revenue</div>
                        </div>
                    </div>
                </div>

                <div id="cancelled-section" class="content-section">
                    <h2>📋 Cancelled Bookings</h2>
                    <p>Cancelled or rejected bookings</p>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number">8</div>
                            <div class="stat-label">This Month</div>
                        </div>
                    </div>
                </div>

                <div id="all-bookings-section" class="content-section">
                    <h2>📋 All Bookings</h2>
                    <p>Complete booking history</p>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number">1,247</div>
                            <div class="stat-label">Total Bookings</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">95%</div>
                            <div class="stat-label">Success Rate</div>
                        </div>
                    </div>
                </div>

                <div id="trash-section" class="content-section">
                    <h2>🗑️ Trash</h2>
                    <p>Deleted bookings (can be restored)</p>
                </div>

                <div id="calendar-section" class="content-section">
                    <h2>📅 Calendar</h2>
                    <p>Calendar view of all bookings</p>
                </div>

                <div id="add-new-section" class="content-section">
                    <h2>➕ Add New Booking</h2>
                    <p>Create a new booking manually</p>
                </div>

                <!-- Users Section -->
                <div id="users-section" class="content-section">
                    <h2>👥 Users</h2>
                    <p>Manage customers, drivers, and admin users</p>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number">342</div>
                            <div class="stat-label">Customers</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">12</div>
                            <div class="stat-label">Drivers</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">3</div>
                            <div class="stat-label">Admins</div>
                        </div>
                    </div>
                </div>

                <!-- Feedback Section -->
                <div id="feedback-section" class="content-section">
                    <h2>💬 Customer Feedback</h2>
                    <p>Reviews and ratings from customers</p>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number">4.8⭐</div>
                            <div class="stat-label">Average Rating</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">89</div>
                            <div class="stat-label">Total Reviews</div>
                        </div>
                    </div>
                </div>

                <!-- Knowledge Base Section -->
                <div id="knowledge-base-section" class="content-section">
                    <h2>📚 Knowledge Base</h2>
                    <p>Help articles and documentation</p>
                    <div class="form-grid">
                        <div class="stat-card">
                            <h3>📋 Getting Started</h3>
                            <p>Learn the basics of using the admin panel</p>
                            <button class="btn btn-primary">Read Guide</button>
                        </div>
                        <div class="stat-card">
                            <h3>🚗 Managing Bookings</h3>
                            <p>How to create, edit and manage bookings</p>
                            <button class="btn btn-primary">Read Guide</button>
                        </div>
                    </div>
                </div>

                <!-- Updates Section -->
                <div id="updates-section" class="content-section">
                    <h2>🔄 System Updates</h2>
                    <p>Latest updates and changelog</p>
                    <div style="border-left: 4px solid #3498db; padding-left: 20px; margin-bottom: 20px;">
                        <h4>Version 2.1.0 - July 6, 2025</h4>
                        <ul>
                            <li>✅ Professional Types of Vehicles system</li>
                            <li>✅ Advanced image upload with drag & drop</li>
                            <li>✅ Real-time sync to booking system</li>
                            <li>✅ Enhanced admin panel UI/UX</li>
                        </ul>
                    </div>
                </div>

                <!-- Settings Sections -->
                <div id="general-section" class="content-section">
                    <h2>⚙️ General Settings</h2>
                    <p>Basic system configuration</p>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Company Name</label>
                            <input type="text" value="Marcel's Taxi" class="form-control">
                        </div>
                        <div class="form-group">
                            <label>Default Currency</label>
                            <select class="form-control">
                                <option>EUR (€)</option>
                                <option>USD ($)</option>
                                <option>GBP (£)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div id="payment-methods-section" class="content-section">
                    <h2>💳 Payment Methods</h2>
                    <p>Configure accepted payment methods</p>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3>💵 Cash</h3>
                            <button class="btn btn-success">✅ Enabled</button>
                        </div>
                        <div class="stat-card">
                            <h3>💳 Card</h3>
                            <button class="btn btn-success">✅ Enabled</button>
                        </div>
                        <div class="stat-card">
                            <h3>🏦 Bank Transfer</h3>
                            <button class="btn btn-secondary">❌ Disabled</button>
                        </div>
                    </div>
                </div>

                <div id="notifications-section" class="content-section">
                    <h2>🔔 Notifications</h2>
                    <p>Email and SMS notification settings</p>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>
                                <input type="checkbox" checked> Email notifications for new bookings
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" checked> SMS notifications for drivers
                            </label>
                        </div>
                    </div>
                </div>

                <div id="mail-section" class="content-section">
                    <h2>📧 Email Settings</h2>
                    <p>Configure email server and templates</p>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>SMTP Server</label>
                            <input type="text" value="smtp.gmail.com" class="form-control">
                        </div>
                        <div class="form-group">
                            <label>From Email</label>
                            <input type="email" value="noreply@marcels-taxi.com" class="form-control">
                        </div>
                    </div>
                </div>

                <div id="booking-settings-section" class="content-section">
                    <h2>📋 Booking Settings</h2>
                    <p>Configure booking rules and restrictions</p>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Minimum advance booking (minutes)</label>
                            <input type="number" value="30" class="form-control">
                        </div>
                        <div class="form-group">
                            <label>Maximum advance booking (days)</label>
                            <input type="number" value="30" class="form-control">
                        </div>
                    </div>
                </div>

                <div id="locations-section" class="content-section">
                    <h2>📍 Locations</h2>
                    <p>Manage pickup and dropoff locations</p>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number">15</div>
                            <div class="stat-label">Popular Locations</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">3</div>
                            <div class="stat-label">Airport Terminals</div>
                        </div>
                    </div>
                </div>

                <div id="services-section" class="content-section">
                    <h2>🎯 Services</h2>
                    <p>Manage available taxi services</p>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3>🏢 Business</h3>
                            <button class="btn btn-success">✅ Active</button>
                        </div>
                        <div class="stat-card">
                            <h3>✈️ Airport</h3>
                            <button class="btn btn-success">✅ Active</button>
                        </div>
                        <div class="stat-card">
                            <h3>🌙 Night Service</h3>
                            <button class="btn btn-success">✅ Active</button>
                        </div>
                    </div>
                </div>

                <div id="users-settings-section" class="content-section">
                    <h2>👥 User Management</h2>
                    <p>Manage user roles and permissions</p>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number">2</div>
                            <div class="stat-label">Super Admins</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">5</div>
                            <div class="stat-label">Dispatchers</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">12</div>
                            <div class="stat-label">Drivers</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // WORKING MENU SYSTEM - Based on admin-simple.html
        console.log('🚀 Professional Admin Panel JavaScript loaded');

        function showSection(sectionName) {
            console.log('📍 Showing section:', sectionName);
            
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show target section
            const targetSection = document.getElementById(sectionName + '-section');
            if (targetSection) {
                targetSection.classList.add('active');
                document.getElementById('pageTitle').textContent = getSectionTitle(sectionName);
                console.log('✅ Section shown:', sectionName);
                
                // Special handling for vehicle sections
                if (sectionName === 'types-of-vehicles') {
                    setTimeout(() => {
                        forceRenderVehicles();
                    }, 100);
                }
            } else {
                console.error('❌ Section not found:', sectionName + '-section');
            }
        }

        function toggleMenu(menuName) {
            console.log('🔧 Toggling menu:', menuName);
            
            const menuId = menuName + '-submenu';
            const menu = document.getElementById(menuId);
            
            if (!menu) {
                console.error('❌ Menu not found:', menuId);
                return;
            }
            
            // Close other menus
            document.querySelectorAll('.nav-submenu').forEach(m => {
                if (m.id !== menuId) {
                    m.classList.remove('show');
                    m.style.display = 'none';
                }
            });
            
            // Toggle current menu
            const isVisible = menu.classList.contains('show');
            if (isVisible) {
                menu.classList.remove('show');
                menu.style.display = 'none';
                console.log('❌ Menu hidden:', menuName);
            } else {
                menu.classList.add('show');
                menu.style.display = 'block';
                console.log('✅ Menu shown:', menuName);
            }
        }

        // Alias for compatibility
        function toggleSubmenu(menuName) {
            toggleMenu(menuName);
        }

        function getSectionTitle(sectionName) {
            const titles = {
                'dispatch': 'Dispatch Center',
                'next-24h': 'Next 24 Hours',
                'latest': 'Latest Bookings',
                'unconfirmed': 'Unconfirmed Bookings',
                'completed': 'Completed Bookings',
                'cancelled': 'Cancelled Bookings',
                'all-bookings': 'All Bookings',
                'trash': 'Trash',
                'calendar': 'Booking Calendar',
                'add-new': 'Add New Booking',
                'driver-report': 'Driver Report',
                'payment-report': 'Payment Report',
                'users': 'Users Management',
                'feedback': 'Customer Feedback',
                'settings': 'Settings',
                'general': 'General Settings',
                'types-of-vehicles': 'Types of Vehicles',
                'payment-methods': 'Payment Methods',
                'notifications': 'Notifications',
                'mail': 'Email Settings',
                'booking-settings': 'Booking Settings',
                'locations': 'Locations',
                'services': 'Services',
                'users-settings': 'User Management',
                'pricing': 'Pricing',
                'deposit-payments': 'Deposit Payments',
                'distance-time': 'Distance & Time Pricing',
                'distance-modifier': 'Distance Modifier',
                'driver-income': 'Driver Income',
                'fixed-prices': 'Fixed Prices',
                'holiday-surcharge': 'Holiday Surcharge',
                'item-surcharge': 'Item Surcharge',
                'location-surcharge': 'Location Surcharge',
                'night-surcharge': 'Night Surcharge',
                'other-discounts': 'Other Discounts',
                'tax': 'Tax Configuration',
                'voucher-discounts': 'Voucher Discounts',
                'knowledge-base': 'Knowledge Base',
                'updates': 'System Updates',
                'profile': 'Profile Settings'
            };
            return titles[sectionName] || sectionName.charAt(0).toUpperCase() + sectionName.slice(1);
        }

        // Test function
        function testSettings() {
            console.log('🧪 Testing all menus...');
            const menus = ['settings', 'bookings', 'pricing', 'reports'];
            
            menus.forEach((menuName, index) => {
                setTimeout(() => {
                    console.log('Testing menu:', menuName);
                    toggleMenu(menuName);
                    setTimeout(() => toggleMenu(menuName), 500);
                }, index * 1000);
            });
        }

        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active class from all nav links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            // Show selected section
            const section = document.getElementById(sectionName + '-section');
            if (section) {
                section.classList.add('active');
            }
            
            // If showing vehicles section, ensure table is rendered
            if (sectionName === 'vehicles' || sectionName === 'types-of-vehicles') {
                setTimeout(() => {
                    forceRenderVehicles();
                }, 50);
            }
            
            // If showing distance-time section, load vehicle pricing
            if (sectionName === 'distance-time') {
                console.log('🚗 Loading Distance & Time pricing section...');
                setTimeout(() => {
                    loadVehiclePricing();
                }, 50);
            }
            
            // Update page title
            const titles = {
                'dispatch': 'Dispatch',
                'next-24h': 'Next 24 Hours',
                'latest': 'Latest Bookings',
                'unconfirmed': 'Unconfirmed Bookings',
                'completed': 'Completed Bookings',
                'cancelled': 'Cancelled Bookings',
                'all-bookings': 'All Bookings',
                'trash': 'Trash',
                'calendar': 'Booking Calendar',
                'add-new': 'Add New Booking',
                'driver-report': 'Driver Report',
                'payment-report': 'Payment Report',
                'users': 'Users',
                'users-settings': 'Users Settings',
                'driver-activities': 'Driver Activities',
                'feedback': 'Customer Feedback',
                'knowledge-base': 'Knowledge Base',
                'updates': 'System Updates',
                'profile': 'Profile Settings',
                'deposit-payments': 'Deposit Payments',
                'distance-time': 'Distance & Time Pricing',
                'distance-modifier': 'Distance Modifier',
                'driver-income': 'Driver Income',
                'fixed-prices': 'Fixed Prices',
                'holiday-surcharge': 'Holiday Surcharge',
                'item-surcharge': 'Item Surcharge',
                'location-surcharge': 'Location Surcharge',
                'night-surcharge': 'Night Surcharge',
                'other-discounts': 'Other Discounts',
                'tax': 'Tax Configuration',
                'voucher-discounts': 'Voucher Discounts',
                'surcharges': 'Surcharges',
                'vehicles': 'Vehicle Types',
                'types-of-vehicles': 'Types of Vehicles',
                'no-show': 'No-Show Management',
                'modifications': 'Booking Modificaties',
                'airport-detection': 'Airport Detection',
                'booking-settings': 'Booking Settings',
                'general': 'General Settings',
                'getting-started': 'Getting Started',
                'google': 'Google Integration',
                'integration': 'Integration',
                'invoices': 'Invoices',
                'localization': 'Localization',
                'location-categories': 'Location Categories',
                'locations': 'Locations',
                'mail': 'Mail Settings',
                'meeting-points': 'Meeting Points',
                'mobile-apps': 'Mobile Apps',
                'notifications': 'Notifications',
                'operating-areas': 'Operating Areas',
                'payment-methods': 'Payment Methods',
                'booking-restrictions': 'Booking Restrictions',
                'roles-permissions': 'Roles & Permissions',
                'scheduled-routes': 'Scheduled Routes',
                'services': 'Services',
                'styles': 'Styles',
                'translations': 'Translations',
                'types-of-vehicles': 'Types of Vehicles',
                'vehicles': 'Types of Vehicles',
                'vehicles-settings': 'Vehicles Settings',
                'web-booking-widget': 'Web Booking Widget',
                'web-widgets': 'Web Widgets',
                'zones': 'Zones',
                'users': 'Users',
                'feedback': 'Customer Feedback',
                'knowledge-base': 'Knowledge Base',
                'updates': 'System Updates'
            };
            
            document.getElementById('pageTitle').textContent = titles[sectionName] || 'Admin Panel';
            
            // Add active class to clicked nav link
            event?.target?.classList.add('active');
            
            // Add active class to nav link by section name
            const navLink = document.querySelector(`[onclick="showSection('${sectionName}')"]`);
            if (navLink) {
                navLink.classList.add('active');
            }
        }

        function toggleSubmenu(menuName) {
            console.log('🔧 Toggling submenu:', menuName);
            const submenuId = menuName + '-submenu';
            const submenu = document.getElementById(submenuId);
            
            if (!submenu) {
                console.error('❌ Submenu not found:', submenuId);
                // Try alternative naming
                const altSubmenu = document.getElementById(menuName + '-menu');
                if (altSubmenu) {
                    console.log('Found alternative menu:', menuName + '-menu');
                    toggleMenu(menuName);
                    return;
                }
                return;
            }
            
            // Close all other submenus first
            document.querySelectorAll('.nav-submenu').forEach(sub => {
                if (sub.id !== submenuId) {
                    sub.classList.remove('show');
                    sub.style.display = 'none';
                }
            });
            
            // Toggle current submenu
            const isVisible = submenu.classList.contains('show');
            if (isVisible) {
                submenu.classList.remove('show');
                submenu.style.display = 'none';
                console.log('❌ Submenu hidden:', menuName);
            } else {
                submenu.classList.add('show');
                submenu.style.display = 'block';
                console.log('✅ Submenu shown:', menuName);
            }
        }

        // Simple working function from admin-simple.html
        function toggleMenu(menuName) {
            console.log('🔧 Toggling menu (simple):', menuName);
            
            const menuId = menuName + '-submenu';
            const menu = document.getElementById(menuId);
            
            if (!menu) {
                console.error('❌ Menu not found:', menuId);
                return;
            }
            
            // Close other menus
            const allMenus = document.querySelectorAll('.nav-submenu');
            allMenus.forEach(m => {
                if (m.id !== menuId) {
                    m.classList.remove('show');
                    m.style.display = 'none';
                }
            });
            
            // Toggle current menu
            const isVisible = menu.classList.contains('show');
            if (isVisible) {
                menu.classList.remove('show');
                menu.style.display = 'none';
                console.log('❌ Menu hidden:', menuName);
            } else {
                menu.classList.add('show');
                menu.style.display = 'block';
                console.log('✅ Menu shown:', menuName);
            }
        }

        // Vehicle Management System
        let vehicles = [
            {
                id: 'premium-class',
                name: 'Premium Class',
                image: 'https://images.unsplash.com/photo-1563720360172-67b8f3dce741?w=400&h=250&fit=crop',
                description: 'First class service',
                driver: 'All',
                services: 'All',
                hourlyRate: 0,
                capacity: {
                    passengers: 2,
                    luggage: 2,
                    handLuggage: 2,
                    wheelchairs: 0,
                    boosterSeats: 0,
                    childSeats: 0,
                    infantSeats: 0
                },
                enquire: false,
                default: false,
                active: true,
                ordering: 0,
                display: 'Frontend & Backend'
            },
            {
                id: 'business-class',
                name: 'Business Class',
                image: 'https://images.unsplash.com/photo-1616422285623-13ff0162193c?w=400&h=250&fit=crop',
                description: 'Premium business transportation',
                driver: 'All',
                services: 'All',
                hourlyRate: 0,
                capacity: {
                    passengers: 4,
                    luggage: 3,
                    handLuggage: 3,
                    wheelchairs: 0,
                    boosterSeats: 0,
                    childSeats: 2,
                    infantSeats: 0
                },
                enquire: false,
                default: false,
                active: true,
                ordering: 0,
                display: 'Frontend & Backend'
            },
            {
                id: 'saloon',
                name: 'Saloon',
                image: 'https://images.unsplash.com/photo-1555215695-3004980ad54e?w=400&h=250&fit=crop',
                description: 'Standard comfortable ride',
                driver: 'All',
                services: 'All',
                hourlyRate: 0,
                capacity: {
                    passengers: 4,
                    luggage: 2,
                    handLuggage: 2,
                    wheelchairs: 0,
                    boosterSeats: 0,
                    childSeats: 2,
                    infantSeats: 0
                },
                enquire: false,
                default: false,
                active: true,
                ordering: 0,
                display: 'Frontend & Backend'
            },
            {
                id: 'economy-saloon',
                name: 'Economy Saloon',
                image: 'https://images.unsplash.com/photo-1549317661-bd32c8ce0db2?w=400&h=250&fit=crop',
                description: 'Budget-friendly option',
                driver: 'All',
                services: 'All',
                hourlyRate: 0,
                capacity: {
                    passengers: 4,
                    luggage: 2,
                    handLuggage: 2,
                    wheelchairs: 0,
                    boosterSeats: 0,
                    childSeats: 1,
                    infantSeats: 0
                },
                enquire: false,
                default: false,
                active: true,
                ordering: 0,
                display: 'Frontend & Backend'
            }
        ];

        let editingVehicleId = null;

        // Initialize admin panel on page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 Marcel\'s Taxi Admin Panel Loading...');
            
            try {
                // Load vehicle data
                loadVehiclesFromStorage();
                
                // Show default section (dispatch)
                showSection('dispatch');
                
                // Initialize vehicle table after short delay
                setTimeout(() => {
                    forceRenderVehicles();
                    syncToBookingSystem();
                    console.log('✅ Admin Panel Ready! Types of Vehicles system loaded.');
                    
                    // Test functions for debugging
                    window.testAdminPanel = function() {
                        showSection('types-of-vehicles');
                        console.log('✅ Types of Vehicles section opened!');
                    };
                    
                    window.testAllSections = function() {
                        const sections = ['dispatch', 'next-24h', 'latest', 'unconfirmed', 'completed', 'cancelled', 'all-bookings', 'trash', 'calendar', 'add-new', 'users', 'feedback', 'knowledge-base', 'updates', 'profile', 'types-of-vehicles'];
                        sections.forEach((section, index) => {
                            setTimeout(() => {
                                showSection(section);
                                console.log(`✅ Testing section: ${section}`);
                            }, index * 500);
                        });
                    };
                    
                }, 200);
                
                // Initialize dispatch form if available
                if (typeof initializeDispatchForm === 'function') {
                    initializeDispatchForm();
                }
                
            } catch (error) {
                console.error('❌ Error loading admin panel:', error);
            }
        });

        // WORKING render function
        function forceRenderVehicles() {
            const tbody = document.getElementById('vehicleTableBody');
            if (!tbody) {
                console.error('Table body not found');
                return;
            }

            // Clear and rebuild
            tbody.innerHTML = '';

            if (vehicles.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="12" style="text-align: center; padding: 40px;">
                            No vehicles found. <a href="#" onclick="openAddVehicleModal()" style="color: #3498db;">Add your first vehicle</a>
                        </td>
                    </tr>
                `;
                return;
            }

            vehicles.forEach(vehicle => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><img src="${vehicle.image}" alt="${vehicle.name}" style="width: 60px; height: 40px; object-fit: cover; border-radius: 4px;"></td>
                    <td><strong>${vehicle.name}</strong></td>
                    <td>${vehicle.driver}</td>
                    <td>${vehicle.services}</td>
                    <td>€${vehicle.hourlyRate}</td>
                    <td><small>👤 ${vehicle.capacity.passengers}<br>🧳 ${vehicle.capacity.luggage}<br>👜 ${vehicle.capacity.handLuggage}</small></td>
                    <td><span style="padding: 4px 8px; border-radius: 4px; font-size: 12px; background: ${vehicle.enquire ? '#d4edda' : '#e2e3e5'}; color: ${vehicle.enquire ? '#155724' : '#383d41'};">${vehicle.enquire ? 'Yes' : 'No'}</span></td>
                    <td><span style="padding: 4px 8px; border-radius: 4px; font-size: 12px; background: ${vehicle.default ? '#cce5ff' : '#e2e3e5'}; color: ${vehicle.default ? '#004085' : '#383d41'};">${vehicle.default ? 'Yes' : 'No'}</span></td>
                    <td><span style="padding: 4px 8px; border-radius: 4px; font-size: 12px; background: ${vehicle.active ? '#d4edda' : '#f8d7da'}; color: ${vehicle.active ? '#155724' : '#721c24'};">${vehicle.active ? 'Active' : 'Inactive'}</span></td>
                    <td>${vehicle.ordering}</td>
                    <td>${vehicle.display}</td>
                    <td>
                        <button onclick="editVehicle('${vehicle.id}')" style="background: #3498db; color: white; border: none; padding: 6px 12px; border-radius: 4px; margin-right: 5px; cursor: pointer;">✏️ Edit</button>
                        <button onclick="deleteVehicle('${vehicle.id}')" style="background: #e74c3c; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer;">🗑️ Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });

            console.log(`✅ Successfully rendered ${vehicles.length} vehicles`);
        }

        function loadVehiclesFromStorage() {
            const savedVehicles = localStorage.getItem('taxiVehicles');
            if (savedVehicles) {
                vehicles = JSON.parse(savedVehicles);
            }
        }

        function saveVehiclesToStorage() {
            localStorage.setItem('taxiVehicles', JSON.stringify(vehicles));
            syncToBookingSystem();
        }

        function renderVehicleTable() {
            forceRenderVehicles();
        }

        function renderVehicleTableOld() {
            const tbody = document.getElementById('vehicleTableBody');
            if (!tbody) {
                console.error('vehicleTableBody not found!');
                return;
            }
            
            console.log('Rendering vehicles table with', vehicles.length, 'vehicles');
            tbody.innerHTML = '';

            vehicles.forEach(vehicle => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <img src="${vehicle.image}" alt="${vehicle.name}" 
                             style="width: 60px; height: 40px; object-fit: cover; border-radius: 4px;" 
                             onerror="this.style.display='none'; this.parentElement.innerHTML='🚗';">
                    </td>
                    <td><strong>${vehicle.name}</strong></td>
                    <td>${vehicle.driver}</td>
                    <td>${vehicle.services}</td>
                    <td>€${vehicle.hourlyRate}</td>
                    <td>
                        <small>
                            👤 ${vehicle.capacity.passengers}<br>
                            🧳 ${vehicle.capacity.luggage}<br>
                            👜 ${vehicle.capacity.handLuggage}
                        </small>
                    </td>
                    <td>
                        <span class="badge ${vehicle.enquire ? 'badge-success' : 'badge-secondary'}">
                            ${vehicle.enquire ? 'Yes' : 'No'}
                        </span>
                    </td>
                    <td>
                        <span class="badge ${vehicle.default ? 'badge-primary' : 'badge-secondary'}">
                            ${vehicle.default ? 'Yes' : 'No'}
                        </span>
                    </td>
                    <td>
                        <span class="badge ${vehicle.active ? 'badge-success' : 'badge-danger'}">
                            ${vehicle.active ? 'Yes' : 'No'}
                        </span>
                    </td>
                    <td>${vehicle.ordering}</td>
                    <td>${vehicle.display}</td>
                    <td>
                        <button class="btn btn-sm btn-primary" onclick="editVehicle('${vehicle.id}')" style="margin-right: 5px; font-size: 12px; padding: 4px 8px;">
                            ✏️ Edit
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="deleteVehicle('${vehicle.id}')" style="font-size: 12px; padding: 4px 8px;">
                            🗑️ Delete
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Professional Vehicle Modal Functions
        function openAddVehicleModal() {
            editingVehicleId = null;
            document.getElementById('modalTitle').textContent = 'Add New Vehicle';
            clearVehicleForm();
            document.getElementById('vehicleModal').style.display = 'block';
            
            // Add modal animation
            const modal = document.getElementById('vehicleModal');
            const modalContent = modal.querySelector('div');
            modalContent.style.transform = 'translate(-50%, -50%) scale(0.8)';
            modalContent.style.opacity = '0';
            
            setTimeout(() => {
                modalContent.style.transition = 'all 0.3s ease';
                modalContent.style.transform = 'translate(-50%, -50%) scale(1)';
                modalContent.style.opacity = '1';
            }, 10);
        }

        function editVehicle(vehicleId) {
            editingVehicleId = vehicleId;
            const vehicle = vehicles.find(v => v.id === vehicleId);
            if (!vehicle) return;

            document.getElementById('modalTitle').textContent = 'Edit Vehicle';
            populateVehicleForm(vehicle);
            document.getElementById('vehicleModal').style.display = 'block';
        }

        function populateVehicleForm(vehicle) {
            document.getElementById('vehicleName').value = vehicle.name;
            document.getElementById('vehicleDescription').value = vehicle.description || '';
            document.getElementById('passengers').value = vehicle.capacity.passengers;
            document.getElementById('luggage').value = vehicle.capacity.luggage;
            document.getElementById('handLuggage').value = vehicle.capacity.handLuggage;
            document.getElementById('wheelchairs').value = vehicle.capacity.wheelchairs;
            document.getElementById('boosterSeats').value = vehicle.capacity.boosterSeats;
            document.getElementById('childSeats').value = vehicle.capacity.childSeats;
            document.getElementById('infantSeats').value = vehicle.capacity.infantSeats;
            document.getElementById('ordering').value = vehicle.ordering;
            document.getElementById('vehicleDriver').value = vehicle.driver;
            document.getElementById('enableEnquire').checked = vehicle.enquire;
            document.getElementById('isDefault').checked = vehicle.default;
            document.getElementById('isActive').checked = vehicle.active;
            document.getElementById('displayOption').value = vehicle.display;
            
            // Set image preview
            if (vehicle.image) {
                const preview = document.getElementById('previewImg');
                if (preview) {
                    preview.src = vehicle.image;
                    preview.style.display = 'block';
                }
            }
        }

        function clearVehicleForm() {
            document.getElementById('vehicleForm').reset();
            const preview = document.getElementById('previewImg');
            if (preview) {
                preview.style.display = 'none';
            }
            document.getElementById('passengers').value = 2;
            document.getElementById('luggage').value = 2;
            document.getElementById('handLuggage').value = 2;
            document.getElementById('wheelchairs').value = 0;
            document.getElementById('boosterSeats').value = 0;
            document.getElementById('childSeats').value = 0;
            document.getElementById('infantSeats').value = 0;
            document.getElementById('ordering').value = 0;
            document.getElementById('isActive').checked = true;
        }

        function closeVehicleModal() {
            const modal = document.getElementById('vehicleModal');
            const modalContent = modal.querySelector('div');
            
            // Add closing animation
            modalContent.style.transition = 'all 0.3s ease';
            modalContent.style.transform = 'translate(-50%, -50%) scale(0.8)';
            modalContent.style.opacity = '0';
            
            setTimeout(() => {
                modal.style.display = 'none';
                editingVehicleId = null;
            }, 300);
        }

        // Professional Image Handling Functions
        function handleImageSelect(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            if (file.size > 5 * 1024 * 1024) {
                showErrorMessage('Image must be smaller than 5MB');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const preview = document.getElementById('vehicleImagePreview');
                const placeholder = document.getElementById('imagePlaceholder');
                const removeBtn = document.getElementById('removeImageBtn');
                
                preview.src = e.target.result;
                preview.style.display = 'block';
                placeholder.style.display = 'none';
                removeBtn.style.display = 'block';
                
                // Add upload animation
                preview.style.opacity = '0';
                preview.style.transform = 'scale(0.8)';
                setTimeout(() => {
                    preview.style.transition = 'all 0.3s ease';
                    preview.style.opacity = '1';
                    preview.style.transform = 'scale(1)';
                }, 10);
                
                showSuccessMessage('Image uploaded successfully!');
            };
            reader.readAsDataURL(file);
        }

        function removeVehicleImage(event) {
            event.stopPropagation();
            
            const preview = document.getElementById('vehicleImagePreview');
            const placeholder = document.getElementById('imagePlaceholder');
            const removeBtn = document.getElementById('removeImageBtn');
            const input = document.getElementById('vehicleImageInput');
            
            preview.style.display = 'none';
            placeholder.style.display = 'block';
            removeBtn.style.display = 'none';
            input.value = '';
            
            showSuccessMessage('Image removed');
        }

        function handleDragOver(event) {
            event.preventDefault();
            const area = document.getElementById('imageUploadArea');
            area.style.borderColor = '#3498db';
            area.style.background = '#f0f8ff';
            area.style.transform = 'scale(1.02)';
        }

        function handleDragLeave(event) {
            event.preventDefault();
            const area = document.getElementById('imageUploadArea');
            area.style.borderColor = '#e1e5e9';
            area.style.background = '#f8f9fa';
            area.style.transform = 'scale(1)';
        }

        function handleImageDrop(event) {
            event.preventDefault();
            const area = document.getElementById('imageUploadArea');
            area.style.borderColor = '#e1e5e9';
            area.style.background = '#f8f9fa';
            area.style.transform = 'scale(1)';
            
            const files = event.dataTransfer.files;
            if (files.length > 0) {
                const input = document.getElementById('vehicleImageInput');
                input.files = files;
                handleImageSelect({ target: input });
            }
        }

        // Professional Save Vehicle Function
        function saveVehicleData() {
            try {
                // Validation
                const name = document.getElementById('vehicleName').value.trim();
                const price = parseFloat(document.getElementById('vehiclePrice').value);
                
                if (!name) {
                    showErrorMessage('Vehicle name is required!');
                    return;
                }
                
                if (!price || price <= 0) {
                    showErrorMessage('Valid base price is required!');
                    return;
                }
                
                // Get image
                const imagePreview = document.getElementById('vehicleImagePreview');
                const imageUrl = imagePreview.style.display === 'block' ? imagePreview.src : 
                    'https://images.unsplash.com/photo-1555215695-3004980ad54e?w=400&h=250&fit=crop';
                
                // Create vehicle object
                const vehicleData = {
                    id: editingVehicleId || generateVehicleId(name),
                    name: name,
                    image: imageUrl,
                    description: document.getElementById('vehicleDescription').value.trim(),
                    driver: 'All',
                    services: document.getElementById('vehicleServices').value,
                    hourlyRate: parseFloat(document.getElementById('vehicleHourlyRate').value) || 0,
                    capacity: {
                        passengers: parseInt(document.getElementById('vehiclePassengers').value) || 4,
                        luggage: parseInt(document.getElementById('vehicleLargeLuggage').value) || 2,
                        handLuggage: parseInt(document.getElementById('vehicleSmallLuggage').value) || 2,
                        wheelchairs: 0,
                        boosterSeats: 0,
                        childSeats: parseInt(document.getElementById('vehicleChildSeats').value) || 0,
                        infantSeats: 0
                    },
                    enquire: document.getElementById('vehicleEnquire').checked,
                    default: document.getElementById('vehicleDefault').checked,
                    active: document.getElementById('vehicleActive').checked,
                    ordering: parseInt(document.getElementById('vehicleOrdering').value) || 0,
                    display: document.getElementById('vehicleDisplay').value,
                    price: price
                };
                
                // Save to vehicles array
                if (editingVehicleId) {
                    const index = vehicles.findIndex(v => v.id === editingVehicleId);
                    if (index !== -1) {
                        vehicles[index] = vehicleData;
                    }
                } else {
                    vehicles.push(vehicleData);
                }
                
                // Save to storage and sync
                saveVehiclesToStorage();
                forceRenderVehicles();
                closeVehicleModal();
                
                showSuccessMessage(`Vehicle "${name}" ${editingVehicleId ? 'updated' : 'added'} successfully! Changes synced to booking system.`);
                
                console.log('✅ Vehicle saved:', vehicleData);
                
            } catch (error) {
                console.error('Error saving vehicle:', error);
                showErrorMessage('Failed to save vehicle. Please try again.');
            }
        }

        function generateVehicleId(name) {
            return name.toLowerCase()
                       .replace(/[^a-z0-9]/g, '-')
                       .replace(/--+/g, '-')
                       .replace(/^-|-$/g, '') + '-' + Date.now();
        }

        // Professional Notification Functions
        function showSuccessMessage(message) {
            const msgEl = document.getElementById('vehicleSuccessMsg');
            const textEl = document.getElementById('successText');
            
            textEl.textContent = message;
            msgEl.style.display = 'block';
            
            // Add animation
            msgEl.style.opacity = '0';
            msgEl.style.transform = 'translateY(-10px)';
            setTimeout(() => {
                msgEl.style.transition = 'all 0.3s ease';
                msgEl.style.opacity = '1';
                msgEl.style.transform = 'translateY(0)';
            }, 10);
            
            // Auto hide after 5 seconds
            setTimeout(() => {
                msgEl.style.opacity = '0';
                msgEl.style.transform = 'translateY(-10px)';
                setTimeout(() => {
                    msgEl.style.display = 'none';
                }, 300);
            }, 5000);
        }

        function showErrorMessage(message) {
            const msgEl = document.getElementById('vehicleErrorMsg');
            const textEl = document.getElementById('errorText');
            
            textEl.textContent = message;
            msgEl.style.display = 'block';
            
            // Add animation
            msgEl.style.opacity = '0';
            msgEl.style.transform = 'translateY(-10px)';
            setTimeout(() => {
                msgEl.style.transition = 'all 0.3s ease';
                msgEl.style.opacity = '1';
                msgEl.style.transform = 'translateY(0)';
            }, 10);
            
            // Auto hide after 5 seconds
            setTimeout(() => {
                msgEl.style.opacity = '0';
                msgEl.style.transform = 'translateY(-10px)';
                setTimeout(() => {
                    msgEl.style.display = 'none';
                }, 300);
            }, 5000);
        }
        
        function clearVehicleForm() {
            document.getElementById('vehicleName').value = '';
            document.getElementById('vehiclePrice').value = '';
            document.getElementById('vehicleHourlyRate').value = '';
            document.getElementById('vehicleDescription').value = '';
            document.getElementById('vehiclePassengers').value = 4;
            document.getElementById('vehicleLargeLuggage').value = 2;
            document.getElementById('vehicleSmallLuggage').value = 2;
            document.getElementById('vehicleChildSeats').value = 0;
            document.getElementById('vehicleOrdering').value = 0;
            document.getElementById('vehicleServices').value = 'All';
            document.getElementById('vehicleDisplay').value = 'Frontend & Backend';
            document.getElementById('vehicleEnquire').checked = false;
            document.getElementById('vehicleDefault').checked = false;
            document.getElementById('vehicleActive').checked = true;
            document.getElementById('vehicleAircon').checked = false;
            
            // Clear image
            const preview = document.getElementById('vehicleImagePreview');
            const placeholder = document.getElementById('imagePlaceholder');
            const removeBtn = document.getElementById('removeImageBtn');
            const input = document.getElementById('vehicleImageInput');
            
            preview.style.display = 'none';
            placeholder.style.display = 'block';
            removeBtn.style.display = 'none';
            input.value = '';
        }

            const previewImg = document.getElementById('previewImg');
            const imageUrl = previewImg && previewImg.src ? previewImg.src : 'https://images.unsplash.com/photo-1555215695-3004980ad54e?w=400&h=250&fit=crop';

            const vehicleData = {
                id: editingVehicleId || generateVehicleId(name),
                name: name,
                image: imageUrl,
                description: document.getElementById('vehicleDescription').value,
                driver: document.getElementById('vehicleDriver').value,
                services: 'All',
                hourlyRate: 0,
                capacity: {
                    passengers: parseInt(document.getElementById('passengers').value) || 2,
                    luggage: parseInt(document.getElementById('luggage').value) || 2,
                    handLuggage: parseInt(document.getElementById('handLuggage').value) || 2,
                    wheelchairs: parseInt(document.getElementById('wheelchairs').value) || 0,
                    boosterSeats: parseInt(document.getElementById('boosterSeats').value) || 0,
                    childSeats: parseInt(document.getElementById('childSeats').value) || 0,
                    infantSeats: parseInt(document.getElementById('infantSeats').value) || 0
                },
                enquire: document.getElementById('enableEnquire').checked,
                default: document.getElementById('isDefault').checked,
                active: document.getElementById('isActive').checked,
                ordering: parseInt(document.getElementById('ordering').value) || 0,
                display: document.getElementById('displayOption').value
            };

            if (editingVehicleId) {
                // Update existing vehicle
                const index = vehicles.findIndex(v => v.id === editingVehicleId);
                if (index !== -1) {
                    vehicles[index] = vehicleData;
                }
            } else {
                // Add new vehicle
                vehicles.push(vehicleData);
            }

            saveVehiclesToStorage();
            forceRenderVehicles();
            closeVehicleModal();
            
            alert(`Vehicle "${name}" ${editingVehicleId ? 'updated' : 'added'} successfully! Changes are automatically synchronized to the booking system.`);
        }

        function deleteVehicle(vehicleId) {
            const vehicle = vehicles.find(v => v.id === vehicleId);
            if (!vehicle) return;

            if (confirm(`Are you sure you want to delete "${vehicle.name}"? This action cannot be undone.`)) {
                vehicles = vehicles.filter(v => v.id !== vehicleId);
                saveVehiclesToStorage();
                forceRenderVehicles();
                alert(`Vehicle "${vehicle.name}" deleted successfully!`);
            }
        }

        function generateVehicleId(name) {
            return name.toLowerCase().replace(/[^a-z0-9]/g, '-').replace(/--+/g, '-').replace(/^-|-$/g, '');
        }

        // Image handling functions
        function updateImagePreview() {
            const select = document.getElementById('imageSelect');
            const preview = document.getElementById('previewImg');
            
            if (select && preview && select.value) {
                preview.src = select.value;
                preview.style.display = 'block';
            }
        }

        function handleImageUpload(input) {
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const preview = document.getElementById('previewImg');
                    if (preview) {
                        preview.src = e.target.result;
                        preview.style.display = 'block';
                    }
                };
                reader.readAsDataURL(file);
            }
        }

        // Radio button switching for image source
        document.addEventListener('change', function(e) {
            if (e.target.name === 'imageSource') {
                const gallerySection = document.getElementById('gallerySection');
                const uploadSection = document.getElementById('uploadSection');
                
                if (gallerySection && uploadSection) {
                    if (e.target.value === 'gallery') {
                        gallerySection.style.display = 'block';
                        uploadSection.style.display = 'none';
                    } else {
                        gallerySection.style.display = 'none';
                        uploadSection.style.display = 'block';
                    }
                }
            }
        });

        // Increment/Decrement functions
        function increment(fieldId) {
            const input = document.getElementById(fieldId);
            if (input) {
                input.value = parseInt(input.value || 0) + 1;
            }
        }

        function decrement(fieldId) {
            const input = document.getElementById(fieldId);
            if (input) {
                const newValue = parseInt(input.value || 0) - 1;
                input.value = Math.max(0, newValue);
            }
        }

        // CRITICAL: Synchronize with booking system
        function syncToBookingSystem() {
            const bookingVehicles = vehicles
                .filter(v => v.active && (v.display === 'Frontend & Backend' || v.display === 'Frontend only'))
                .map(v => ({
                    id: v.id,
                    name: v.name,
                    price: Math.random() * 400 + 200, // Generate random price for demo
                    passengers: `1-${v.capacity.passengers} passengers`,
                    luggage: `1-${v.capacity.luggage} large bags`,
                    handLuggage: `1-${v.capacity.handLuggage} small bags`,
                    image: v.image
                }));
            
            // Save to localStorage for booking system to read
            localStorage.setItem('bookingSystemVehicles', JSON.stringify(bookingVehicles));
            
            console.log('✅ Vehicles synchronized to booking system:', bookingVehicles);
        }

        // Auto-sync every 2 seconds to ensure real-time updates
        setInterval(syncToBookingSystem, 2000);

        // Sign Out Function
        function signOut() {
            if (confirm('Are you sure you want to sign out?')) {
                localStorage.removeItem('adminLoggedIn');
                localStorage.removeItem('adminUser');
                window.location.href = '/admin-login.html';
            }
        }

        function logout() {
            if (confirm('Are you sure you want to sign out?')) {
                localStorage.removeItem('adminLoggedIn');
                window.location.href = '/admin-login.html';
            }
        }

        // No-Show Management Functions
        function saveNoShowSettings() {
            const noShowFee = document.getElementById('noShowFee').value;
            const waitTime = document.getElementById('waitTime').value;
            const autoNoShow = document.getElementById('autoNoShow').checked;
            const emailNoShow = document.getElementById('emailNoShow').checked;
            
            // In real app, save to backend
            alert(`No-Show instellingen opgeslagen:\nBoete: €${noShowFee}\nWachttijd: ${waitTime} minuten\nAuto no-show: ${autoNoShow}\nEmail notificatie: ${emailNoShow}`);
        }
        
        function markNoShowPaid(bookingId) {
            // In real app, update backend
            alert(`No-Show boete voor booking ${bookingId} gemarkeerd als betaald`);
        }
        
        function waiveNoShowFee(bookingId) {
            if (confirm('Weet je zeker dat je de no-show boete wilt kwijtschelden?')) {
                // In real app, update backend
                alert(`No-Show boete voor booking ${bookingId} kwijtgescholden`);
            }
        }
        
        // Booking Modification Functions
        function saveModificationSettings() {
            const freeModificationHours = document.getElementById('freeModificationHours').value;
            const modificationFee = document.getElementById('modificationFee').value;
            const cancellationFee = document.getElementById('cancellationFee').value;
            const fullPaymentLate = document.getElementById('fullPaymentLate').checked;
            
            // In real app, save to backend
            alert(`Modificatie instellingen opgeslagen:\nGratis wijziging: ${freeModificationHours} uur\nWijzigingskosten: €${modificationFee}\nAnnuleringskosten: €${cancellationFee}\nVolledige betaling bij te laat: ${fullPaymentLate}`);
        }

        // New Dispatch Functions
        let currentRoute = null;
        let availableDrivers = 8;

        // Initialize dispatch form
        function initializeDispatchForm() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('pickupDate').value = today;
            
            const now = new Date();
            now.setMinutes(now.getMinutes() + 30);
            const timeString = now.toTimeString().slice(0, 5);
            document.getElementById('pickupTime').value = timeString;
            
            // Add event listeners for price calculation
            document.getElementById('pickupLocation').addEventListener('input', calculateRoutePrice);
            document.getElementById('destination').addEventListener('input', calculateRoutePrice);
            document.getElementById('vehicleType').addEventListener('change', calculateRoutePrice);
            document.getElementById('passengerCount').addEventListener('change', calculateRoutePrice);
        }

        // Manual booking form submission
        document.getElementById('manualBookingForm').addEventListener('submit', function(e) {
            e.preventDefault();
            createManualBooking();
        });

        function createManualBooking() {
            const bookingData = {
                passengerName: document.getElementById('passengerName').value,
                passengerPhone: document.getElementById('passengerPhone').value,
                passengerEmail: document.getElementById('passengerEmail').value,
                pickupLocation: document.getElementById('pickupLocation').value,
                destination: document.getElementById('destination').value,
                viaLocation: document.getElementById('viaLocation').value,
                pickupDate: document.getElementById('pickupDate').value,
                pickupTime: document.getElementById('pickupTime').value,
                vehicleType: document.getElementById('vehicleType').value,
                passengerCount: document.getElementById('passengerCount').value,
                paymentMethod: document.getElementById('paymentMethod').value,
                specialRequirements: document.getElementById('specialRequirements').value,
                returnJourney: document.getElementById('returnJourney').value
            };

            // Validate required fields
            if (!bookingData.passengerName || !bookingData.passengerPhone || !bookingData.pickupLocation || 
                !bookingData.destination || !bookingData.pickupDate || !bookingData.pickupTime || 
                !bookingData.vehicleType || !bookingData.paymentMethod) {
                alert('Vul alle verplichte velden in!');
                return;
            }

            // Generate booking ID
            const bookingId = 'BK' + String(Date.now()).slice(-6);
            
            // Get current price
            const totalPrice = document.getElementById('totalPrice').textContent;
            
            // Show confirmation
            const confirmMessage = `Boeking succesvol aangemaakt!

Booking ID: #${bookingId}
Klant: ${bookingData.passengerName}
Telefoon: ${bookingData.passengerPhone}
Route: ${bookingData.pickupLocation} → ${bookingData.destination}
Datum: ${bookingData.pickupDate} om ${bookingData.pickupTime}
Voertuig: ${bookingData.vehicleType}
Passagiers: ${bookingData.passengerCount}
Betaling: ${bookingData.paymentMethod}
Totale prijs: ${totalPrice}`;

            alert(confirmMessage);
            
            // Clear form
            clearForm();
            
            // Reinitialize form
            initializeDispatchForm();
        }

        function calculateRoutePrice() {
            const pickup = document.getElementById('pickupLocation').value;
            const destination = document.getElementById('destination').value;
            const vehicleType = document.getElementById('vehicleType').value;
            const passengerCount = document.getElementById('passengerCount').value;

            if (!pickup || !destination || !vehicleType) {
                document.getElementById('totalPrice').textContent = '€0.00';
                document.getElementById('priceBreakdown').textContent = 'Vul locaties in voor prijsberekening';
                document.getElementById('routeDistance').textContent = '-';
                document.getElementById('routeDuration').textContent = '-';
                return;
            }

            // Simulate route calculation
            const distance = Math.random() * 25 + 8; // Random distance 8-33 km
            const duration = Math.round(distance * 2.5 + Math.random() * 10); // Duration in minutes
            
            // Base pricing
            let basePrice = 2.50;
            let pricePerKm = 1.20;
            let pricePerMinute = 0.35;
            
            // Vehicle type multipliers
            const vehicleMultipliers = {
                'economy': 1.0,
                'business': 1.3,
                'minivan': 1.8,
                'luxury': 2.5
            };
            
            // Calculate price
            let totalPrice = basePrice + (distance * pricePerKm) + (duration * pricePerMinute);
            totalPrice *= vehicleMultipliers[vehicleType] || 1.0;
            
            // Round to nearest 0.50
            totalPrice = Math.round(totalPrice * 2) / 2;
            
            // Update UI
            document.getElementById('totalPrice').textContent = `€${totalPrice.toFixed(2)}`;
            document.getElementById('priceBreakdown').textContent = `${distance.toFixed(1)} km • ${duration} min • ${vehicleType}`;
            document.getElementById('routeDistance').textContent = `${distance.toFixed(1)} km`;
            document.getElementById('routeDuration').textContent = `${duration} min`;
            
            // Store current route info
            currentRoute = {
                distance: distance,
                duration: duration,
                price: totalPrice
            };
        }

        function clearForm() {
            document.getElementById('manualBookingForm').reset();
            document.getElementById('totalPrice').textContent = '€0.00';
            document.getElementById('priceBreakdown').textContent = 'Bereken route voor prijsberekening';
            document.getElementById('routeDistance').textContent = '-';
            document.getElementById('routeDuration').textContent = '-';
            currentRoute = null;
        }

        function loadTemplate() {
            // Load a predefined template
            document.getElementById('passengerName').value = 'John Doe';
            document.getElementById('passengerPhone').value = '+31 6 12345678';
            document.getElementById('passengerEmail').value = 'john@example.com';
            document.getElementById('pickupLocation').value = 'Amsterdam Centraal Station';
            document.getElementById('destination').value = 'Schiphol Airport';
            document.getElementById('vehicleType').value = 'business';
            document.getElementById('passengerCount').value = '2';
            document.getElementById('paymentMethod').value = 'card';
            
            // Recalculate price
            calculateRoutePrice();
        }

        // Map functions
        function refreshDrivers() {
            // Simulate driver refresh
            const drivers = document.querySelectorAll('.driver-marker');
            drivers.forEach(driver => {
                driver.style.animation = 'pulse 0.5s ease-in-out';
                setTimeout(() => {
                    driver.style.animation = '';
                }, 500);
            });
            
            // Update available drivers count
            availableDrivers = Math.floor(Math.random() * 3) + 6; // 6-8 drivers
            document.getElementById('availableDrivers').textContent = availableDrivers;
            
            // Update legend
            const legend = document.querySelector('.driver-status-legend');
            legend.innerHTML = `
                <div class="legend-item">
                    <div class="legend-color legend-available"></div>
                    <span>Available (${availableDrivers})</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color legend-busy"></div>
                    <span>Busy (${9 - availableDrivers})</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color legend-offline"></div>
                    <span>Offline (1)</span>
                </div>
            `;
        }

        function toggleTraffic() {
            alert('Verkeersinformatie wordt in-/uitgeschakeld');
        }

        function centerMap() {
            alert('Kaart wordt gecentreerd op huidige locatie');
        }

        function toggleFullscreen() {
            const mapContainer = document.querySelector('.dispatch-right');
            if (mapContainer.classList.contains('fullscreen')) {
                mapContainer.classList.remove('fullscreen');
                mapContainer.style.position = 'relative';
                mapContainer.style.top = 'auto';
                mapContainer.style.left = 'auto';
                mapContainer.style.width = '65%';
                mapContainer.style.height = 'auto';
                mapContainer.style.zIndex = 'auto';
            } else {
                mapContainer.classList.add('fullscreen');
                mapContainer.style.position = 'fixed';
                mapContainer.style.top = '0';
                mapContainer.style.left = '0';
                mapContainer.style.width = '100vw';
                mapContainer.style.height = '100vh';
                mapContainer.style.zIndex = '9999';
            }
        }

        // Legacy functions (kept for compatibility)
        function calculatePrice() {
            calculateRoutePrice();
        }

        function assignDriver(driverId) {
            const driverNames = {
                'driver1': 'Mohammed Ali',
                'driver3': 'Ahmed Hassan',
                'driver4': 'Peter Bakker'
            };
            
            const driverName = driverNames[driverId];
            if (confirm(`Wil je ${driverName} toewijzen aan de nieuwe rit?`)) {
                alert(`${driverName} toegewezen! De chauffeur ontvangt een notificatie.`);
                // In real app, assign driver and send notification
            }
        }

        function trackRide(rideId) {
            alert(`GPS tracking voor rit ${rideId} wordt geopend...\n\nHier zie je:\n- Real-time locatie van chauffeur\n- Geschatte aankomsttijd\n- Route voortgang`);
            // In real app, open tracking interface
        }

        function contactDriver(driverId) {
            const driverPhones = {
                'driver2': '+31 6 22222222',
                'driver3': '+31 6 33333333'
            };
            
            const phone = driverPhones[driverId];
            if (phone) {
                if (confirm(`Bel chauffeur op ${phone}?`)) {
                    window.open(`tel:${phone}`);
                }
            }
        }

        function completeRide(rideId) {
            if (confirm(`Rit ${rideId} markeren als voltooid?`)) {
                alert(`Rit ${rideId} voltooid! Factuur wordt gegenereerd.`);
                // In real app, complete ride and generate invoice
            }
        }

        // Initialize dispatch data when page loads
        function initializeDispatch() {
            // Initialize the new dispatch form
            initializeDispatchForm();
        }

        // Call initialize function when DOM is loaded
        document.addEventListener('DOMContentLoaded', initializeDispatch);

        // Advanced Distance & Time Pricing Functions
        function addDistanceRow() {
            const table = document.getElementById('distancePricingTable');
            const newRow = document.createElement('tr');
            newRow.innerHTML = `
                <td><input type="text" placeholder="0 - 100" style="width: 100px;"></td>
                <td><input type="number" value="0" step="0.1" style="width: 80px;"></td>
                <td>Override</td>
                <td><input type="number" value="2.3" step="0.1" style="width: 60px;"></td>
                <td><input type="number" value="1.6" step="0.1" style="width: 60px;"></td>
                <td><input type="number" value="1.7" step="0.1" style="width: 60px;"></td>
                <td><input type="number" value="4" step="0.1" style="width: 60px;"></td>
                <td><input type="number" value="1.85" step="0.1" style="width: 60px;"></td>
                <td><input type="number" value="1.92" step="0.1" style="width: 60px;"></td>
                <td><input type="number" value="3" step="0.1" style="width: 60px;"></td>
                <td><input type="number" value="3.5" step="0.1" style="width: 60px;"></td>
                <td><input type="number" value="2.1" step="0.1" style="width: 60px;"></td>
                <td><button class="btn btn-danger btn-sm" onclick="removeDistanceRow(this)">🗑️</button></td>
            `;
            table.appendChild(newRow);
        }

        function removeDistanceRow(button) {
            if (confirm('Weet je zeker dat je deze prijsregel wilt verwijderen?')) {
                button.closest('tr').remove();
            }
        }

        function calculateDistancePrice() {
            const distance = parseFloat(document.getElementById('distanceCalcInput').value);
            if (!distance || distance <= 0) {
                alert('Vul een geldige afstand in kilometers in.');
                return;
            }

            // Get current pricing from table
            const table = document.getElementById('distancePricingTable');
            const rows = table.getElementsByTagName('tr');
            
            let results = {};
            
            // Vehicle types and their column indices
            const vehicleTypes = {
                'Saloon': 4,
                'Minivan': 5,
                'Premium Class': 6,
                'Business Class': 9
            };

            // Calculate for each vehicle type
            for (let [vehicleName, columnIndex] of Object.entries(vehicleTypes)) {
                const pricePerKm = parseFloat(rows[0].children[columnIndex].children[0].value) || 0;
                const totalPrice = distance * pricePerKm;
                results[vehicleName] = totalPrice.toFixed(2);
            }

            // Show results
            let resultText = `Prijsberekening voor ${distance} km:\n\n`;
            for (let [vehicle, price] of Object.entries(results)) {
                resultText += `${vehicle}: €${price}\n`;
            }

            alert(resultText);
        }

        function saveDistanceTimePricing() {
            // Collect all pricing data
            const distanceData = [];
            const table = document.getElementById('distancePricingTable');
            const rows = table.getElementsByTagName('tr');
            
            for (let i = 0; i < rows.length; i++) {
                const row = rows[i];
                const inputs = row.getElementsByTagName('input');
                if (inputs.length > 0) {
                    const rowData = {
                        distance: row.children[0].textContent || inputs[0].value,
                        basePrice: inputs[1].value,
                        minivanB: inputs[2].value,
                        saloon: inputs[3].value,
                        minivan: inputs[4].value,
                        premiumClass: inputs[5].value,
                        economySaloon: inputs[6].value,
                        economyEstate: inputs[7].value,
                        businessClass: inputs[8].value,
                        businessClassVan: inputs[9].value,
                        minivanA: inputs[10].value
                    };
                    distanceData.push(rowData);
                }
            }

            const timePrice = document.getElementById('pricePerMinute').value;
            const additionalModification = document.getElementById('additionalPriceModification').checked;

            // Collect minimum fare data
            const minimumFares = {};
            const minFareTable = document.querySelector('#distance-time-section .pricing-section:last-of-type table tbody');
            const minFareRows = minFareTable.getElementsByTagName('tr');
            
            for (let i = 0; i < minFareRows.length; i++) {
                const row = minFareRows[i];
                const vehicleType = row.children[0].textContent;
                const minFare = row.children[1].children[0].value;
                minimumFares[vehicleType] = parseFloat(minFare) || 0;
            }

            const pricingConfig = {
                distance: distanceData,
                timePerMinute: parseFloat(timePrice) || 0,
                additionalPriceModification: additionalModification,
                minimumFares: minimumFares,
                savedAt: new Date()
            };

            // In real app, save to backend
            localStorage.setItem('distanceTimePricing', JSON.stringify(pricingConfig));
            
            alert(`Distance & Time pricing opgeslagen!\n\nConfiguratie:\n- ${distanceData.length} afstand regels\n- Prijs per minuut: €${timePrice}\n- Minimum tarieven: ${Object.keys(minimumFares).length} voertuig types\n- Additional modification: ${additionalModification ? 'Ja' : 'Nee'}`);
        }

        // Load saved pricing on page load
        function loadDistanceTimePricing() {
            const saved = localStorage.getItem('distanceTimePricing');
            if (saved) {
                const config = JSON.parse(saved);
                document.getElementById('pricePerMinute').value = config.timePerMinute || 0;
                document.getElementById('additionalPriceModification').checked = config.additionalPriceModification || false;
                
                // Load minimum fares
                if (config.minimumFares) {
                    const minFareTable = document.querySelector('#distance-time-section .pricing-section:last-of-type table tbody');
                    const minFareRows = minFareTable.getElementsByTagName('tr');
                    
                    for (let i = 0; i < minFareRows.length; i++) {
                        const row = minFareRows[i];
                        const vehicleType = row.children[0].textContent;
                        if (config.minimumFares[vehicleType] !== undefined) {
                            row.children[1].children[0].value = config.minimumFares[vehicleType];
                        }
                    }
                }
            }
        }

        // Load pricing when distance-time section is shown
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(loadDistanceTimePricing, 100);
            loadVehicleManagement();
        });

        // Vehicle Management System
        let vehicleData = [
            {
                id: 'premium_class',
                name: 'Premium Class',
                driver: 'All',
                services: 'All',
                hourlyRate: 0,
                capacity: { passengers: 2, luggage: 2, handLuggage: 2 },
                enquire: false,
                default: false,
                active: true,
                ordering: 0,
                display: 'Frontend & Backend',
                price: 690.00,
                description: 'Luxury vehicle with premium comfort',
                image: null
            },
            {
                id: 'business_class',
                name: 'Business Class',
                driver: 'All',
                services: 'All',
                hourlyRate: 0,
                capacity: { passengers: 2, luggage: 2, handLuggage: 2 },
                enquire: false,
                default: false,
                active: true,
                ordering: 3,
                display: 'Frontend & Backend',
                price: 523.00,
                description: 'Professional business class vehicle',
                image: null
            },
            {
                id: 'minivan',
                name: 'Minivan',
                driver: 'All',
                services: 'All',
                hourlyRate: 0,
                capacity: { passengers: 7, luggage: 6, handLuggage: 6, boosterSeats: 1, childSeats: 1 },
                enquire: false,
                default: false,
                active: true,
                ordering: 0,
                display: 'Frontend & Backend',
                price: 366.00,
                description: 'Spacious minivan for groups',
                image: null
            },
            {
                id: 'saloon',
                name: 'Saloon',
                driver: 'All',
                services: 'All',
                hourlyRate: 0,
                capacity: { passengers: 2, luggage: 2, handLuggage: 2 },
                enquire: false,
                default: false,
                active: true,
                ordering: 0,
                display: 'Frontend & Backend',
                price: 290.00,
                description: 'Standard saloon car',
                image: null
            }
        ];

        let currentEditingVehicle = null;

        // Load vehicle management
        function loadVehicleManagement() {
            // Load saved vehicle data
            const saved = localStorage.getItem('vehicleManagementData');
            if (saved) {
                vehicleData = JSON.parse(saved);
            }
            loadVehicleTable();
        }

        // Load vehicle table
        function loadVehicleTable() {
            const tbody = document.getElementById('vehicleTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            vehicleData.forEach((vehicle, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <div style="width: 80px; height: 60px; background: #f8f9fa; border-radius: 6px; display: flex; align-items: center; justify-content: center; overflow: hidden; cursor: pointer;" onclick="editVehicle('${vehicle.id}')">
                            ${vehicle.image ? 
                                `<img src="${vehicle.image}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 6px;">` : 
                                `<span style="color: #6c757d; font-size: 24px;">📷</span>`
                            }
                        </div>
                    </td>
                    <td><strong>${vehicle.name}</strong></td>
                    <td>${vehicle.driver}</td>
                    <td>${vehicle.services}</td>
                    <td>${vehicle.hourlyRate}</td>
                    <td>
                        <div style="font-size: 12px;">
                            Passengers: ${vehicle.capacity.passengers}<br>
                            Luggage: ${vehicle.capacity.luggage}<br>
                            Hand luggage: ${vehicle.capacity.handLuggage || 0}
                        </div>
                    </td>
                    <td>
                        <span class="badge ${vehicle.enquire ? 'badge-warning' : 'badge-success'}">
                            ${vehicle.enquire ? 'Yes' : 'No'}
                        </span>
                    </td>
                    <td>
                        <span class="badge ${vehicle.default ? 'badge-success' : ''}">
                            ${vehicle.default ? 'Yes' : ''}
                        </span>
                    </td>
                    <td>
                        <span class="badge ${vehicle.active ? 'badge-success' : 'badge-danger'}">
                            ${vehicle.active ? 'Yes' : 'No'}
                        </span>
                    </td>
                    <td>${vehicle.ordering}</td>
                    <td>${vehicle.display}</td>
                    <td>
                        <button class="btn btn-sm" onclick="editVehicle('${vehicle.id}')" title="Edit">
                            ✏️
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="deleteVehicle('${vehicle.id}')" title="Delete">
                            🗑️
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Add new vehicle
        function addNewVehicle() {
            currentEditingVehicle = null;
            document.getElementById('modalTitle').textContent = 'Add New Vehicle';
            clearVehicleForm();
            document.getElementById('vehicleModal').style.display = 'block';
        }

        // Edit vehicle
        function editVehicle(vehicleId) {
            const vehicle = vehicleData.find(v => v.id === vehicleId);
            if (!vehicle) return;
            
            currentEditingVehicle = vehicleId;
            document.getElementById('modalTitle').textContent = 'Edit Vehicle';
            populateVehicleForm(vehicle);
            document.getElementById('vehicleModal').style.display = 'block';
        }

        // Delete vehicle
        function deleteVehicle(vehicleId) {
            if (confirm('Are you sure you want to delete this vehicle?')) {
                vehicleData = vehicleData.filter(v => v.id !== vehicleId);
                saveVehicleData();
                loadVehicleTable();
                syncWithBookingSystem();
            }
        }

        // Clear vehicle form
        function clearVehicleForm() {
            document.getElementById('vehicleForm').reset();
            document.getElementById('vehicleImagePreview').style.display = 'none';
            document.getElementById('imagePlaceholder').style.display = 'block';
            document.getElementById('removeImageBtn').style.display = 'none';
            document.getElementById('vehicleActive').checked = true;
        }

        // Populate vehicle form
        function populateVehicleForm(vehicle) {
            document.getElementById('vehicleName').value = vehicle.name;
            document.getElementById('vehiclePrice').value = vehicle.price;
            document.getElementById('vehicleHourlyRate').value = vehicle.hourlyRate;
            document.getElementById('vehicleServices').value = vehicle.services;
            document.getElementById('vehicleDisplay').value = vehicle.display;
            document.getElementById('vehicleOrdering').value = vehicle.ordering;
            document.getElementById('vehiclePassengers').value = vehicle.capacity.passengers;
            document.getElementById('vehicleLargeLuggage').value = vehicle.capacity.luggage;
            document.getElementById('vehicleSmallLuggage').value = vehicle.capacity.handLuggage || 0;
            document.getElementById('vehicleChildSeats').value = vehicle.capacity.childSeats || 0;
            document.getElementById('vehicleEnquire').checked = vehicle.enquire;
            document.getElementById('vehicleDefault').checked = vehicle.default;
            document.getElementById('vehicleActive').checked = vehicle.active;
            document.getElementById('vehicleDescription').value = vehicle.description || '';
            
            // Handle image
            if (vehicle.image) {
                document.getElementById('vehicleImagePreview').src = vehicle.image;
                document.getElementById('vehicleImagePreview').style.display = 'block';
                document.getElementById('imagePlaceholder').style.display = 'none';
                document.getElementById('removeImageBtn').style.display = 'inline-block';
            } else {
                document.getElementById('vehicleImagePreview').style.display = 'none';
                document.getElementById('imagePlaceholder').style.display = 'block';
                document.getElementById('removeImageBtn').style.display = 'none';
            }
        }

        // Close vehicle modal
        function closeVehicleModal() {
            document.getElementById('vehicleModal').style.display = 'none';
            currentEditingVehicle = null;
        }

        // Handle image selection
        function handleImageSelect(event) {
            const file = event.target.files[0];
            if (file) {
                processImageFile(file);
            }
        }

        // Handle drag and drop
        function handleImageDrop(event) {
            event.preventDefault();
            const uploadArea = document.getElementById('imageUploadArea');
            uploadArea.style.borderColor = '#dee2e6';
            uploadArea.style.backgroundColor = '';
            
            const files = event.dataTransfer.files;
            if (files.length > 0) {
                processImageFile(files[0]);
            }
        }

        function handleDragOver(event) {
            event.preventDefault();
            const uploadArea = document.getElementById('imageUploadArea');
            uploadArea.style.borderColor = '#007bff';
            uploadArea.style.backgroundColor = '#f8fcff';
        }

        function handleDragLeave(event) {
            const uploadArea = document.getElementById('imageUploadArea');
            uploadArea.style.borderColor = '#dee2e6';
            uploadArea.style.backgroundColor = '';
        }

        // Process image file
        function processImageFile(file) {
            if (!file.type.startsWith('image/')) {
                alert('Please select a valid image file (JPG, PNG, WebP)');
                return;
            }
            
            if (file.size > 5 * 1024 * 1024) {
                alert('File size too large. Maximum 5MB allowed.');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('vehicleImagePreview').src = e.target.result;
                document.getElementById('vehicleImagePreview').style.display = 'block';
                document.getElementById('imagePlaceholder').style.display = 'none';
                document.getElementById('removeImageBtn').style.display = 'inline-block';
            };
            reader.readAsDataURL(file);
        }

        // Remove vehicle image
        function removeVehicleImage() {
            document.getElementById('vehicleImagePreview').style.display = 'none';
            document.getElementById('imagePlaceholder').style.display = 'block';
            document.getElementById('removeImageBtn').style.display = 'none';
            document.getElementById('vehicleImageInput').value = '';
        }

        // Vehicle form submission
        document.addEventListener('DOMContentLoaded', function() {
            const vehicleForm = document.getElementById('vehicleForm');
            if (vehicleForm) {
                vehicleForm.addEventListener('submit', function(event) {
                    event.preventDefault();
                    saveVehicle();
                });
            }
        });

        // Save vehicle
        function saveVehicle() {
            const vehicleForm = document.getElementById('vehicleForm');
            const formData = new FormData(vehicleForm);
            
            const vehicleObj = {
                id: currentEditingVehicle || 'vehicle_' + Date.now(),
                name: document.getElementById('vehicleName').value,
                driver: 'All',
                services: document.getElementById('vehicleServices').value,
                hourlyRate: parseFloat(document.getElementById('vehicleHourlyRate').value) || 0,
                capacity: {
                    passengers: parseInt(document.getElementById('vehiclePassengers').value) || 1,
                    luggage: parseInt(document.getElementById('vehicleLargeLuggage').value) || 0,
                    handLuggage: parseInt(document.getElementById('vehicleSmallLuggage').value) || 0,
                    childSeats: parseInt(document.getElementById('vehicleChildSeats').value) || 0
                },
                enquire: document.getElementById('vehicleEnquire').checked,
                default: document.getElementById('vehicleDefault').checked,
                active: document.getElementById('vehicleActive').checked,
                ordering: parseInt(document.getElementById('vehicleOrdering').value) || 0,
                display: document.getElementById('vehicleDisplay').value,
                price: parseFloat(document.getElementById('vehiclePrice').value) || 0,
                description: document.getElementById('vehicleDescription').value,
                image: null
            };
            
            // Get image if uploaded
            const imagePreview = document.getElementById('vehicleImagePreview');
            if (imagePreview.style.display !== 'none') {
                vehicleObj.image = imagePreview.src;
            }
            
            // Add or update vehicle
            if (currentEditingVehicle) {
                const index = vehicleData.findIndex(v => v.id === currentEditingVehicle);
                if (index !== -1) {
                    vehicleData[index] = vehicleObj;
                }
            } else {
                vehicleData.push(vehicleObj);
            }
            
            saveVehicleData();
            loadVehicleTable();
            closeVehicleModal();
            syncWithBookingSystem();
            
            alert('Vehicle saved successfully!');
        }

        // Save vehicle data to localStorage
        function saveVehicleData() {
            localStorage.setItem('vehicleManagementData', JSON.stringify(vehicleData));
        }

        // Save all vehicles
        function saveAllVehicles() {
            saveVehicleData();
            syncWithBookingSystem();
            alert('All vehicles saved successfully!');
        }

        // Vehicle Pricing System Functions
        function loadVehiclePricing() {
            console.log('🔄 Loading vehicle pricing...');
            
            // Load vehicles from Types of Vehicles
            const savedVehicles = localStorage.getItem('taxiVehicles');
            let vehicles = [];
            
            if (savedVehicles) {
                try {
                    vehicles = JSON.parse(savedVehicles);
                    console.log('✅ Loaded', vehicles.length, 'vehicles from localStorage');
                } catch (e) {
                    console.error('❌ Error parsing saved vehicles:', e);
                }
            }
            
            // If no vehicles in storage, use default data from vehicleData
            if (vehicles.length === 0) {
                vehicles = vehicleData.filter(v => v.active);
                console.log('📋 Using default vehicle data:', vehicles.length, 'vehicles');
            }
            
            // If still no vehicles, create some default ones
            if (vehicles.length === 0) {
                vehicles = [
                    {
                        id: 'premium_class',
                        name: 'Premium Class',
                        description: 'Luxury vehicle with premium comfort',
                        image: 'https://images.unsplash.com/photo-1563720360172-67b8f3dce741?w=400&h=250&fit=crop',
                        active: true,
                        capacity: { passengers: 4, luggage: 2, handLuggage: 2 }
                    },
                    {
                        id: 'business_class',
                        name: 'Business Class',
                        description: 'Professional business class vehicle',
                        image: 'https://images.unsplash.com/photo-1555215695-3004980ad54e?w=400&h=250&fit=crop',
                        active: true,
                        capacity: { passengers: 4, luggage: 2, handLuggage: 2 }
                    },
                    {
                        id: 'minivan',
                        name: 'Minivan',
                        description: 'Spacious minivan for groups',
                        image: 'https://images.unsplash.com/photo-1544636331-e26879cd4d9b?w=400&h=250&fit=crop',
                        active: true,
                        capacity: { passengers: 7, luggage: 6, handLuggage: 6 }
                    }
                ];
                console.log('🆕 Created default vehicles for pricing');
            }
            
            // Load saved pricing
            const savedPricing = localStorage.getItem('vehiclePricing');
            const pricingData = savedPricing ? JSON.parse(savedPricing) : {};
            
            const container = document.getElementById('vehiclePricingContainer');
            if (!container) return;
            
            // Clear container
            container.innerHTML = '';
            
            if (vehicles.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #6c757d;">
                        <h3>Geen voertuigen gevonden</h3>
                        <p>Voeg eerst voertuigen toe in de Types of Vehicles sectie.</p>
                        <button class="btn btn-primary" onclick="showSection('vehicles')">
                            🚗 Ga naar Types of Vehicles
                        </button>
                    </div>
                `;
                return;
            }
            
            // Create pricing cards for each vehicle
            let htmlContent = '<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px;">';
            
            vehicles.forEach(vehicle => {
                const pricing = pricingData[vehicle.id] || { minimumPrice: 25.00, pricePerKm: 2.50 };
                
                htmlContent += `
                    <div style="background: white; border: 1px solid #e9ecef; border-radius: 12px; padding: 25px; box-shadow: 0 2px 10px rgba(0,0,0,0.08);">
                        <div style="display: flex; align-items: center; margin-bottom: 20px;">
                            <div style="width: 60px; height: 40px; background: #f8f9fa; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                                ${vehicle.image ? 
                                    `<img src="${vehicle.image}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">` : 
                                    '🚗'
                                }
                            </div>
                            <div>
                                <h4 style="margin: 0; font-size: 16px; font-weight: 600; color: #2c3e50;">${vehicle.name}</h4>
                                <p style="margin: 0; font-size: 12px; color: #6c757d;">${vehicle.description || 'Professional taxi service'}</p>
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div>
                                <label style="display: block; font-size: 13px; font-weight: 500; color: #6c757d; margin-bottom: 8px;">Minimum prijs</label>
                                <div style="display: flex; align-items: center; border: 1px solid #e9ecef; border-radius: 8px; overflow: hidden;">
                                    <button type="button" onclick="adjustPrice('${vehicle.id}', 'minimum', -0.50)" 
                                            style="background: #f8f9fa; border: none; padding: 8px 12px; cursor: pointer; color: #6c757d;">-</button>
                                    <input type="number" id="minimum_${vehicle.id}" value="${pricing.minimumPrice.toFixed(2)}" 
                                           step="0.50" min="0" 
                                           style="border: none; text-align: center; padding: 8px; width: 100%; outline: none; font-weight: 500;"
                                           onchange="updatePricing('${vehicle.id}', 'minimum', this.value)">
                                    <button type="button" onclick="adjustPrice('${vehicle.id}', 'minimum', 0.50)" 
                                            style="background: #f8f9fa; border: none; padding: 8px 12px; cursor: pointer; color: #6c757d;">+</button>
                                </div>
                            </div>
                            
                            <div>
                                <label style="display: block; font-size: 13px; font-weight: 500; color: #6c757d; margin-bottom: 8px;">Prijs per km</label>
                                <div style="display: flex; align-items: center; border: 1px solid #e9ecef; border-radius: 8px; overflow: hidden;">
                                    <button type="button" onclick="adjustPrice('${vehicle.id}', 'perKm', -0.10)" 
                                            style="background: #f8f9fa; border: none; padding: 8px 12px; cursor: pointer; color: #6c757d;">-</button>
                                    <input type="number" id="perKm_${vehicle.id}" value="${pricing.pricePerKm.toFixed(2)}" 
                                           step="0.10" min="0" 
                                           style="border: none; text-align: center; padding: 8px; width: 100%; outline: none; font-weight: 500;"
                                           onchange="updatePricing('${vehicle.id}', 'perKm', this.value)">
                                    <button type="button" onclick="adjustPrice('${vehicle.id}', 'perKm', 0.10)" 
                                            style="background: #f8f9fa; border: none; padding: 8px 12px; cursor: pointer; color: #6c757d;">+</button>
                                </div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 20px; padding-top: 15px; border-top: 1px solid #f1f3f4; display: flex; justify-content: space-between; align-items: center;">
                            <span style="font-size: 12px; color: #6c757d;">
                                Capaciteit: ${vehicle.capacity?.passengers || 4} personen
                            </span>
                            <span style="font-size: 12px; color: ${vehicle.active ? '#28a745' : '#dc3545'}; font-weight: 500;">
                                ${vehicle.active ? '✅ Actief' : '❌ Inactief'}
                            </span>
                        </div>
                    </div>
                `;
            });
            
            htmlContent += '</div>';
            container.innerHTML = htmlContent;
            
            console.log(`Loaded pricing for ${vehicles.length} vehicles`);
        }
        
        function adjustPrice(vehicleId, type, amount) {
            const inputId = type === 'minimum' ? `minimum_${vehicleId}` : `perKm_${vehicleId}`;
            const input = document.getElementById(inputId);
            if (input) {
                const currentValue = parseFloat(input.value) || 0;
                const newValue = Math.max(0, currentValue + amount);
                input.value = newValue.toFixed(2);
                updatePricing(vehicleId, type, newValue);
            }
        }
        
        function updatePricing(vehicleId, type, value) {
            // Load current pricing data
            const savedPricing = localStorage.getItem('vehiclePricing');
            let pricingData = savedPricing ? JSON.parse(savedPricing) : {};
            
            // Initialize vehicle pricing if not exists
            if (!pricingData[vehicleId]) {
                pricingData[vehicleId] = { minimumPrice: 25.00, pricePerKm: 2.50 };
            }
            
            // Update the specific price
            if (type === 'minimum') {
                pricingData[vehicleId].minimumPrice = parseFloat(value) || 0;
            } else if (type === 'perKm') {
                pricingData[vehicleId].pricePerKm = parseFloat(value) || 0;
            }
            
            // Save back to localStorage
            localStorage.setItem('vehiclePricing', JSON.stringify(pricingData));
            
            // Trigger sync to booking system
            syncPricingToBookingSystem();
            
            console.log(`Updated ${type} pricing for vehicle ${vehicleId}: €${value}`);
        }
        
        function saveAllPricing() {
            // Collect all pricing data from form inputs
            const savedVehicles = localStorage.getItem('taxiVehicles');
            let vehicles = savedVehicles ? JSON.parse(savedVehicles) : vehicleData.filter(v => v.active);
            
            const pricingData = {};
            let savedCount = 0;
            
            vehicles.forEach(vehicle => {
                const minimumInput = document.getElementById(`minimum_${vehicle.id}`);
                const perKmInput = document.getElementById(`perKm_${vehicle.id}`);
                
                if (minimumInput && perKmInput) {
                    pricingData[vehicle.id] = {
                        minimumPrice: parseFloat(minimumInput.value) || 25.00,
                        pricePerKm: parseFloat(perKmInput.value) || 2.50,
                        lastUpdated: new Date().toISOString()
                    };
                    savedCount++;
                }
            });
            
            // Save to localStorage
            localStorage.setItem('vehiclePricing', JSON.stringify(pricingData));
            
            // Sync to booking system
            syncPricingToBookingSystem();
            
            // Show success message
            alert(`✅ Alle prijzen opgeslagen!\n\n${savedCount} voertuigen bijgewerkt\nPrijzen zijn gesynchroniseerd met het boekingssysteem.`);
            
            console.log('All pricing saved:', pricingData);
        }
        
        function resetToDefaults() {
            if (confirm('Weet je zeker dat je alle prijzen wilt resetten naar de standaardwaarden?')) {
                localStorage.removeItem('vehiclePricing');
                loadVehiclePricing();
                alert('✅ Prijzen gereset naar standaardwaarden');
            }
        }
        
        function syncPricingToBookingSystem() {
            const pricingData = JSON.parse(localStorage.getItem('vehiclePricing') || '{}');
            const vehicles = JSON.parse(localStorage.getItem('taxiVehicles') || '[]');
            
            // Create booking system compatible data
            const bookingSystemPricing = {};
            
            vehicles.forEach(vehicle => {
                if (vehicle.active) {
                    const pricing = pricingData[vehicle.id] || { minimumPrice: 25.00, pricePerKm: 2.50 };
                    bookingSystemPricing[vehicle.id] = {
                        vehicleId: vehicle.id,
                        vehicleName: vehicle.name,
                        minimumPrice: pricing.minimumPrice,
                        pricePerKm: pricing.pricePerKm,
                        capacity: vehicle.capacity,
                        image: vehicle.image,
                        description: vehicle.description,
                        active: vehicle.active,
                        lastUpdated: new Date().toISOString()
                    };
                }
            });
            
            // Save for booking system
            localStorage.setItem('bookingSystemPricing', JSON.stringify(bookingSystemPricing));
            localStorage.setItem('pricingLastUpdate', Date.now().toString());
            
            console.log('Pricing synced to booking system:', bookingSystemPricing);
        }
        
        function debugPricingSection() {
            console.log('🔧 Distance & Time Debug Info:');
            
            const savedVehicles = localStorage.getItem('taxiVehicles');
            const savedPricing = localStorage.getItem('vehiclePricing');
            const bookingPricing = localStorage.getItem('bookingSystemPricing');
            
            console.log('📋 Saved vehicles:', savedVehicles ? JSON.parse(savedVehicles).length : 0);
            console.log('💰 Saved pricing:', savedPricing ? Object.keys(JSON.parse(savedPricing)).length : 0);
            console.log('🎫 Booking pricing:', bookingPricing ? Object.keys(JSON.parse(bookingPricing)).length : 0);
            console.log('🚗 Default vehicleData:', vehicleData.length);
            
            const container = document.getElementById('vehiclePricingContainer');
            console.log('📦 Container found:', !!container);
            console.log('📦 Container content length:', container ? container.innerHTML.length : 0);
            
            // Force reload
            console.log('🔄 Force reloading pricing...');
            loadVehiclePricing();
            
            alert(`Debug Info:\n\n✅ Saved vehicles: ${savedVehicles ? JSON.parse(savedVehicles).length : 0}\n✅ Pricing data: ${savedPricing ? Object.keys(JSON.parse(savedPricing)).length : 0}\n✅ Default vehicles: ${vehicleData.length}\n✅ Container found: ${!!container}\n\nCheck console for detailed info!`);
        }

        // Sync with booking system
        function syncWithBookingSystem() {
            // Convert vehicle management data to booking system format
            const bookingSystemVehicles = {};
            
            vehicleData.forEach(vehicle => {
                if (vehicle.active) {
                    const key = vehicle.name.toLowerCase().replace(/\s+/g, '_');
                    bookingSystemVehicles[key] = {
                        name: vehicle.name,
                        passengers: vehicle.capacity.passengers,
                        largeBags: vehicle.capacity.luggage,
                        smallBags: vehicle.capacity.handLuggage || 0,
                        basePrice: vehicle.price,
                        description: vehicle.description || '',
                        image: vehicle.image
                    };
                }
            });
            
            // Save to localStorage for booking system
            localStorage.setItem('vehicleConfig', JSON.stringify(bookingSystemVehicles));
        }

        // Preview booking system
        function previewBookingSystem() {
            syncWithBookingSystem();
            window.open('booking-system-final.html', '_blank');
        }

        // Check if admin is logged in
        if (localStorage.getItem('adminLoggedIn') !== 'true') {
            window.location.href = '/admin-login.html';
        }
    </script>
</body>
</html>